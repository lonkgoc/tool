import{r as d,j as t}from"./index-DqXMfBpZ.js";import{T as O}from"./target-DXclbhc-.js";import{P as R}from"./plus-DXsQ2qju.js";import{D as L}from"./download-DfWGAFzS.js";import{C as I}from"./calendar-vc0H8C7r.js";import{C as N}from"./check-BUCBOD09.js";import{T as P}from"./trash-2-BVmSqRQv.js";import{F as U}from"./flag-D-Jqpxkc.js";function V(){const[n,i]=d.useState(()=>{const e=localStorage.getItem("goals");if(e)try{return JSON.parse(e).map(s=>({...s,milestones:s.milestones||[],createdAt:s.createdAt||new Date().toISOString()}))}catch{return[]}return[]}),[r,c]=d.useState({title:"",description:"",targetDate:""}),[u,h]=d.useState(null),[f,x]=d.useState(null),[b,v]=d.useState(null),[p,g]=d.useState("");d.useEffect(()=>{localStorage.setItem("goals",JSON.stringify(n))},[n]);const m=e=>{h(e),setTimeout(()=>h(null),3e3)},w=()=>{r.title.trim()&&(i([...n,{id:Date.now().toString(),...r,progress:0,completed:!1,milestones:[],createdAt:new Date().toISOString()}]),c({title:"",description:"",targetDate:""}),m("Goal added! ðŸŽ¯"))},y=(e,s)=>{i(n.map(l=>l.id===e?{...l,progress:Math.max(0,Math.min(100,s))}:l))},k=e=>{i(n.map(l=>l.id===e?{...l,completed:!l.completed,progress:l.completed?l.progress:100}:l));const s=n.find(l=>l.id===e);s&&!s.completed&&m("Goal completed! ðŸŽ‰")},D=e=>{f===e?(i(n.filter(s=>s.id!==e)),x(null),m("Goal deleted")):(x(e),setTimeout(()=>x(null),3e3))},j=e=>{p.trim()&&(i(n.map(s=>s.id!==e?s:{...s,milestones:[...s.milestones,{id:Date.now().toString(),title:p,completed:!1}]})),g(""))},C=(e,s)=>{i(n.map(l=>{if(l.id!==e)return l;const a=l.milestones.map(o=>o.id===s?{...o,completed:!o.completed}:o),A=a.filter(o=>o.completed).length,E=a.length>0?Math.round(A/a.length*100):l.progress;return{...l,milestones:a,progress:E}}))},S=(e,s)=>{i(n.map(l=>l.id!==e?l:{...l,milestones:l.milestones.filter(a=>a.id!==s)}))},G=()=>{const e=new Blob([JSON.stringify(n,null,2)],{type:"application/json"}),s=URL.createObjectURL(e),l=document.createElement("a");l.href=s,l.download=`goals-${new Date().toISOString().split("T")[0]}.json`,l.click(),URL.revokeObjectURL(s),m("Goals exported!")},T=e=>{if(!e)return null;const s=new Date(e).getTime()-new Date().getTime();return Math.ceil(s/(1e3*60*60*24))},$=n.filter(e=>e.completed).length,M=n.filter(e=>!e.completed).length;return t.jsxs("div",{className:"space-y-6",children:[u&&t.jsx("div",{className:"fixed top-4 right-4 z-50 px-4 py-3 rounded-lg shadow-lg bg-green-500 text-white",children:u}),n.length>0&&t.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[t.jsxs("div",{className:"card text-center bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20",children:[t.jsx("div",{className:"text-2xl font-bold text-blue-600",children:n.length}),t.jsx("div",{className:"text-xs text-slate-600",children:"Total"})]}),t.jsxs("div",{className:"card text-center bg-gradient-to-br from-yellow-50 to-orange-50 dark:from-yellow-900/20 dark:to-orange-900/20",children:[t.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:M}),t.jsx("div",{className:"text-xs text-slate-600",children:"Active"})]}),t.jsxs("div",{className:"card text-center bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20",children:[t.jsx("div",{className:"text-2xl font-bold text-green-600",children:$}),t.jsx("div",{className:"text-xs text-slate-600",children:"Done"})]})]}),t.jsxs("div",{className:"card",children:[t.jsxs("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100 mb-4 flex items-center gap-2",children:[t.jsx(O,{className:"w-6 h-6"})," Goal Tracker"]}),t.jsxs("div",{className:"space-y-3 mb-4",children:[t.jsx("input",{type:"text",value:r.title,onChange:e=>c({...r,title:e.target.value}),placeholder:"Goal title",className:"w-full input-field"}),t.jsx("textarea",{value:r.description,onChange:e=>c({...r,description:e.target.value}),placeholder:"Description (optional)",className:"w-full input-field h-16"}),t.jsx("input",{type:"date",value:r.targetDate,onChange:e=>c({...r,targetDate:e.target.value}),className:"w-full input-field"}),t.jsxs("button",{onClick:w,className:"btn-primary w-full flex items-center justify-center gap-2",children:[t.jsx(R,{className:"w-5 h-5"})," Add Goal"]})]}),n.length>0&&t.jsxs("button",{onClick:G,className:"btn-secondary w-full text-sm flex items-center justify-center gap-1",children:[t.jsx(L,{className:"w-4 h-4"})," Export Goals"]})]}),t.jsxs("div",{className:"space-y-4",children:[n.map(e=>{const s=T(e.targetDate),l=b===e.id;return t.jsxs("div",{className:`card ${e.completed?"opacity-70":""}`,children:[t.jsxs("div",{className:"flex items-start justify-between mb-2",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:`font-semibold text-slate-900 dark:text-slate-100 ${e.completed?"line-through":""}`,children:e.title}),e.description&&t.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:e.description}),t.jsxs("div",{className:"flex flex-wrap gap-2 mt-2 text-xs text-slate-500",children:[e.targetDate&&t.jsxs("span",{className:`flex items-center gap-1 ${s!==null&&s<0?"text-red-500":s!==null&&s<=7?"text-yellow-500":""}`,children:[t.jsx(I,{className:"w-3 h-3"}),new Date(e.targetDate).toLocaleDateString(),s!==null&&` (${s>=0?`${s}d left`:"overdue"})`]}),t.jsxs("span",{children:["Created: ",new Date(e.createdAt).toLocaleDateString()]})]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>k(e.id),className:`p-2 rounded-lg ${e.completed?"bg-green-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:t.jsx(N,{className:"w-4 h-4"})}),t.jsx("button",{onClick:()=>D(e.id),className:`p-2 rounded-lg ${f===e.id?"bg-red-500 text-white animate-pulse":"bg-red-100 dark:bg-red-900/30 text-red-500"}`,children:t.jsx(P,{className:"w-4 h-4"})})]})]}),t.jsxs("div",{className:"mt-3",children:[t.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[t.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Progress"}),t.jsxs("span",{className:"font-semibold",children:[e.progress,"%"]})]}),t.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2",children:t.jsx("div",{className:`h-2 rounded-full transition-all ${e.completed?"bg-green-500":"bg-blue-500"}`,style:{width:`${e.progress}%`}})}),!e.completed&&t.jsx("input",{type:"range",min:"0",max:"100",value:e.progress,onChange:a=>y(e.id,Number(a.target.value)),className:"w-full mt-2"})]}),t.jsxs("button",{onClick:()=>v(l?null:e.id),className:"mt-3 text-sm text-blue-600 flex items-center gap-1",children:[t.jsx(U,{className:"w-4 h-4"})," Milestones (",e.milestones.filter(a=>a.completed).length,"/",e.milestones.length,")"]}),l&&t.jsxs("div",{className:"mt-3 pt-3 border-t border-slate-200 dark:border-slate-700",children:[t.jsxs("div",{className:"flex gap-2 mb-2",children:[t.jsx("input",{type:"text",value:p,onChange:a=>g(a.target.value),onKeyPress:a=>a.key==="Enter"&&j(e.id),placeholder:"Add milestone",className:"flex-1 input-field text-sm"}),t.jsx("button",{onClick:()=>j(e.id),className:"btn-secondary text-sm",children:"Add"})]}),t.jsxs("div",{className:"space-y-1",children:[e.milestones.map(a=>t.jsxs("div",{className:"flex items-center gap-2 p-2 bg-slate-50 dark:bg-slate-800 rounded",children:[t.jsx("button",{onClick:()=>C(e.id,a.id),className:`p-1 rounded ${a.completed?"bg-green-500 text-white":"bg-slate-200 dark:bg-slate-600"}`,children:t.jsx(N,{className:"w-3 h-3"})}),t.jsx("span",{className:`flex-1 text-sm ${a.completed?"line-through text-slate-400":""}`,children:a.title}),t.jsx("button",{onClick:()=>S(e.id,a.id),className:"text-slate-400 hover:text-red-500",children:"Ã—"})]},a.id)),e.milestones.length===0&&t.jsx("p",{className:"text-xs text-slate-400 text-center py-2",children:"No milestones yet"})]})]})]},e.id)}),n.length===0&&t.jsx("div",{className:"text-center py-12 text-slate-500",children:"No goals yet. Add one to get started! ðŸŽ¯"})]})]})}export{V as default};
