import{r as n,j as e,X as F}from"./index-DqXMfBpZ.js";import{U as T}from"./upload-DyHvPoT9.js";import{D as k}from"./download-DfWGAFzS.js";function U(){const[o,x]=n.useState(null),[c,m]=n.useState(""),[i,h]=n.useState(""),[r,u]=n.useState(null),p=n.useRef(null),d=n.useRef(null),b=l=>{var s;const a=(s=l.target.files)==null?void 0:s[0];if(a&&a.type.startsWith("image/")){x(a);const t=URL.createObjectURL(a);f(t)}},f=l=>{const a=new Image;a.onload=()=>{const s=p.current;if(!s)return;const t=s.getContext("2d");t&&(s.width=a.width,s.height=a.height,t.drawImage(a,0,0),c&&(t.fillStyle="#FFFFFF",t.strokeStyle="#000000",t.lineWidth=4,t.font="bold 48px Impact",t.textAlign="center",t.textBaseline="top",t.fillText(c,s.width/2,20),t.strokeText(c,s.width/2,20)),i&&(t.fillStyle="#FFFFFF",t.strokeStyle="#000000",t.lineWidth=4,t.font="bold 48px Impact",t.textAlign="center",t.textBaseline="bottom",t.fillText(i,s.width/2,s.height-20),t.strokeText(i,s.width/2,s.height-20)),s.toBlob(g=>{if(g){const w=URL.createObjectURL(g);u(w)}},"image/png"))},a.src=l},j=()=>{o&&f(URL.createObjectURL(o))},N=()=>{if(r){const l=document.createElement("a");l.href=r,l.download="meme.png",l.click()}},v=()=>{x(null),m(""),h(""),u(null),d.current&&(d.current.value="")};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{children:e.jsxs("label",{className:"cursor-pointer",children:[e.jsx("input",{ref:d,type:"file",accept:"image/*",onChange:b,className:"hidden"}),e.jsx("div",{className:"flex items-center justify-center p-8 border-2 border-dashed border-slate-300 dark:border-slate-600 rounded-xl hover:border-blue-500 transition-colors",children:e.jsxs("div",{className:"text-center",children:[e.jsx(T,{className:"w-12 h-12 mx-auto mb-4 text-slate-400"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Click to upload image or drag and drop"})]})})]})}),o&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"card",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Top Text"}),e.jsx("input",{type:"text",value:c,onChange:l=>{m(l.target.value),setTimeout(j,100)},placeholder:"Top caption",className:"w-full input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Bottom Text"}),e.jsx("input",{type:"text",value:i,onChange:l=>{h(l.target.value),setTimeout(j,100)},placeholder:"Bottom caption",className:"w-full input-field"})]})]})}),r&&e.jsxs("div",{className:"card",children:[e.jsx("img",{src:r,alt:"Meme",className:"w-full rounded-xl mb-4"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:N,className:"btn-primary flex-1 flex items-center justify-center space-x-2",children:[e.jsx(k,{className:"w-5 h-5"}),e.jsx("span",{children:"Download"})]}),e.jsxs("button",{onClick:v,className:"btn-secondary flex items-center space-x-2",children:[e.jsx(F,{className:"w-5 h-5"}),e.jsx("span",{children:"Clear"})]})]})]})]}),e.jsx("canvas",{ref:p,className:"hidden"})]})}export{U as default};
