import{c as z,r as x,j as e}from"./index-DrWj1tgA.js";import{I as H}from"./info-D2-6aX7Y.js";import{U as T}from"./upload-C3dpc3Xt.js";import{D as V}from"./download-DZ1EfTSG.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=z("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);function Y(){const[h,U]=x.useState(null),[k,w]=x.useState(null),[f,b]=x.useState(null),[y,F]=x.useState(!1),[v,g]=x.useState(""),p=x.useRef(null),S=async t=>{var s;const r=(s=t.target.files)==null?void 0:s[0];if(!r)return;if(!r.type.startsWith("image/")){g("Please select an image file");return}U(r),g(""),F(!0);const l=URL.createObjectURL(r);w(l);try{const i=await L(r);b(i)}catch{g("Could not extract EXIF data. This image may not contain metadata."),b(null)}finally{F(!1)}},L=async t=>new Promise((r,l)=>{const s=new FileReader;s.onload=i=>{var C;const a=new DataView((C=i.target)==null?void 0:C.result);if(a.getUint16(0)!==65496){r(E(t));return}const n=E(t);let c=2;for(;c<a.byteLength&&a.getUint8(c)===255;){if(a.getUint8(c+1)===225){a.getUint16(c+2);const u=c+4;if(String.fromCharCode(a.getUint8(u),a.getUint8(u+1),a.getUint8(u+2),a.getUint8(u+3))==="Exif"){const d=u+6,o=a.getUint16(d)===18761,R=a.getUint32(d+4,o),B=a.getUint16(d+R,o);for(let N=0;N<B;N++){const m=d+R+2+N*12,P=a.getUint16(m,o);switch(a.getUint16(m+2,o),a.getUint32(m+4,o),P){case 271:n.Make=j(a,d,m,o);break;case 272:n.Model=j(a,d,m,o);break;case 274:n.Orientation=a.getUint16(m+8,o);break;case 282:n.XResolution=I(a,d,m+8,o);break;case 283:n.YResolution=I(a,d,m+8,o);break;case 306:n.DateTime=j(a,d,m,o);break}}}break}const M=a.getUint16(c+2);c+=2+M}r(n)},s.onerror=l,s.readAsArrayBuffer(t)}),E=t=>({FileName:t.name,FileSize:O(t.size),FileType:t.type,LastModified:new Date(t.lastModified).toLocaleString()}),j=(t,r,l,s)=>{try{const i=t.getUint32(l+4,s);let a=l+8;i>4&&(a=r+t.getUint32(l+8,s));let n="";for(let c=0;c<i-1;c++)n+=String.fromCharCode(t.getUint8(a+c));return n}catch{return""}},I=(t,r,l,s)=>{try{const i=r+t.getUint32(l,s),a=t.getUint32(i,s),n=t.getUint32(i+4,s);return n?a/n:0}catch{return 0}},O=t=>t<1024?t+" B":t<1024*1024?(t/1024).toFixed(2)+" KB":(t/(1024*1024)).toFixed(2)+" MB",D=()=>{U(null),w(null),b(null),g(""),p.current&&(p.current.value="")},X=()=>{if(!f)return;let t=`=== EXIF Data ===

`;for(const[i,a]of Object.entries(f))t+=`${i}: ${a}
`;const r=new Blob([t],{type:"text/plain"}),l=URL.createObjectURL(r),s=document.createElement("a");s.href=l,s.download=`${(h==null?void 0:h.name)||"image"}-exif.txt`,s.click(),URL.revokeObjectURL(l)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card",children:[e.jsxs("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100 mb-6 flex items-center gap-2",children:[e.jsx(H,{className:"w-6 h-6 text-blue-500"}),"EXIF Data Viewer"]}),e.jsxs("label",{className:"cursor-pointer block mb-6",children:[e.jsx("input",{ref:p,type:"file",accept:"image/*",onChange:S,className:"hidden"}),e.jsx("div",{className:"flex items-center justify-center p-8 border-2 border-dashed border-slate-300 dark:border-slate-600 rounded-xl hover:border-blue-500 transition-colors",children:e.jsxs("div",{className:"text-center",children:[e.jsx(T,{className:"w-12 h-12 mx-auto mb-4 text-slate-400"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Click to upload image or drag and drop"}),e.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"JPG, PNG, TIFF, HEIC"})]})})]}),v&&e.jsx("div",{className:"mb-4 p-4 bg-yellow-50 dark:bg-yellow-900/20 text-yellow-800 dark:text-yellow-200 rounded-xl",children:v}),y&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full mx-auto"}),e.jsx("p",{className:"mt-2 text-slate-600",children:"Reading EXIF data..."})]}),k&&f&&!y&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"text-center",children:e.jsx("img",{src:k,alt:"Preview",className:"max-h-64 mx-auto rounded-xl border border-slate-200 dark:border-slate-700"})}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(G,{className:"w-5 h-5"})," Image Metadata"]}),e.jsxs("button",{onClick:X,className:"btn-secondary text-sm flex items-center gap-1",children:[e.jsx(V,{className:"w-4 h-4"})," Export"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:Object.entries(f).map(([t,r])=>e.jsxs("div",{className:"flex justify-between p-3 bg-white dark:bg-slate-900 rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:t}),e.jsx("span",{className:"text-sm text-slate-900 dark:text-slate-100 text-right max-w-[60%] truncate",children:String(r)})]},t))})]}),e.jsx("button",{onClick:D,className:"btn-secondary w-full",children:"Clear & Upload New Image"})]})]}),e.jsxs("div",{className:"text-sm text-slate-500 dark:text-slate-400 bg-slate-50 dark:bg-slate-800/50 rounded-xl p-4",children:[e.jsx("p",{className:"font-medium mb-2",children:"What is EXIF data?"}),e.jsx("p",{children:"EXIF (Exchangeable Image File Format) contains metadata about images including camera model, date taken, exposure settings, GPS coordinates, and more. Not all images contain EXIF data."})]})]})}export{Y as default};
