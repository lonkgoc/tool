import{c as S,r as l,j as e,L as D}from"./index-Ckx5g3CE.js";import{P as z}from"./index-UAj_GkhJ.js";import{U as F}from"./upload-BeZbD1lf.js";import{D as P}from"./download-CBMF7h4P.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N=S("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);function U(){const[a,h]=l.useState(null),[c,b]=l.useState(!1),[j,n]=l.useState(""),[d,m]=l.useState(null),[r,g]=l.useState(0),[x,p]=l.useState(0),u=l.useRef(null),v=async t=>{var i;const s=(i=t.target.files)==null?void 0:i[0];s&&s.type==="application/pdf"&&(h(s),g(s.size),n(""),m(null),p(0))},k=async()=>{if(a){b(!0),n("");try{const t=await a.arrayBuffer(),s=await z.load(t);s.setTitle(""),s.setAuthor(""),s.setSubject(""),s.setKeywords([]),s.setProducer(""),s.setCreator("");const i=await s.save({useObjectStreams:!0,addDefaultPage:!1}),y=new Blob([i.buffer],{type:"application/pdf"});m(y),p(y.size)}catch(t){n(t.message||"Error compressing PDF")}finally{b(!1)}}},w=()=>{if(!d)return;const t=URL.createObjectURL(d),s=document.createElement("a");s.href=t,s.download=(a==null?void 0:a.name.replace(".pdf","_compressed.pdf"))||"compressed.pdf",s.click(),URL.revokeObjectURL(t)},C=()=>{h(null),m(null),g(0),p(0),n(""),u.current&&(u.current.value="")},f=t=>t<1024?t+" B":t<1024*1024?(t/1024).toFixed(2)+" KB":(t/(1024*1024)).toFixed(2)+" MB",o=r&&x?Math.round((1-x/r)*100):0;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card",children:[e.jsxs("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100 mb-6 flex items-center gap-2",children:[e.jsx(N,{className:"w-6 h-6 text-pink-500"}),"Compress PDF"]}),e.jsxs("label",{className:"cursor-pointer block mb-4",children:[e.jsx("input",{ref:u,type:"file",accept:".pdf",onChange:v,className:"hidden"}),e.jsx("div",{className:"flex items-center justify-center p-8 border-2 border-dashed border-slate-300 dark:border-slate-600 rounded-xl hover:border-pink-500 transition-colors",children:e.jsxs("div",{className:"text-center",children:[e.jsx(F,{className:"w-12 h-12 mx-auto mb-4 text-slate-400"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:a?a.name:"Click to upload PDF"}),r>0&&e.jsxs("p",{className:"text-sm text-slate-500",children:["Original: ",f(r)]})]})})]}),j&&e.jsx("div",{className:"mb-4 p-4 bg-red-50 dark:bg-red-900/20 text-red-600 rounded-xl",children:j}),e.jsxs("button",{onClick:k,disabled:!a||c,className:"btn-primary w-full flex items-center justify-center gap-2 disabled:opacity-50",children:[c?e.jsx(D,{className:"w-5 h-5 animate-spin"}):e.jsx(N,{className:"w-5 h-5"}),c?"Compressing...":"Compress PDF"]}),d&&e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-4 rounded-xl",children:[e.jsx("div",{className:"font-bold text-lg",children:f(r)}),e.jsx("div",{className:"text-sm text-slate-500",children:"Original"})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-4 rounded-xl",children:[e.jsx("div",{className:"font-bold text-lg",children:f(x)}),e.jsx("div",{className:"text-sm text-slate-500",children:"Compressed"})]}),e.jsxs("div",{className:`p-4 rounded-xl ${o>0?"bg-green-50 dark:bg-green-900/30":"bg-yellow-50 dark:bg-yellow-900/30"}`,children:[e.jsx("div",{className:`font-bold text-lg ${o>0?"text-green-600":"text-yellow-600"}`,children:o>0?`-${o}%`:"0%"}),e.jsx("div",{className:"text-sm text-slate-500",children:"Saved"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:w,className:"btn-primary flex-1 flex items-center justify-center gap-2",children:[e.jsx(P,{className:"w-5 h-5"})," Download"]}),e.jsx("button",{onClick:C,className:"btn-secondary",children:"Clear"})]})]})]}),e.jsxs("div",{className:"text-sm text-slate-500 bg-yellow-50 dark:bg-yellow-900/30 p-4 rounded-xl",children:[e.jsx("strong",{children:"Note:"})," This removes metadata and uses object streams to reduce file size. For heavy compression of images inside PDFs, professional tools like Adobe Acrobat are required."]})]})}export{U as default};
