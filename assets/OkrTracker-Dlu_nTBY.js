import{r as c,j as e}from"./index-DrWj1tgA.js";import{P as R}from"./plus-DPTEUXD6.js";import{T as w}from"./trending-up-CZ5q9nyq.js";import{T as K}from"./trash-2-DTZrw6Iv.js";function A(){const[r,n]=c.useState(()=>{const t=localStorage.getItem("okrs");return t?JSON.parse(t):[]}),[x,g]=c.useState(""),[v,p]=c.useState(null),[o,b]=c.useState(""),i=t=>{localStorage.setItem("okrs",JSON.stringify(t))},h=()=>{if(!x.trim())return;const t={id:Date.now().toString(),objective:x.trim(),keyResults:[],quarter:new Date().getFullYear()+" Q"+Math.ceil((new Date().getMonth()+1)/3),status:"not-started"},s=[...r,t];n(s),i(s),g("")},j=t=>{if(!o.trim())return;const s=r.map(a=>a.id===t?{...a,keyResults:[...a.keyResults,{id:Date.now().toString(),text:o.trim(),progress:0}]}:a);n(s),i(s),b("")},N=(t,s,a)=>{const l=r.map(d=>d.id===t?{...d,keyResults:d.keyResults.map(m=>m.id===s?{...m,progress:Math.max(0,Math.min(100,a))}:m)}:d);n(l),i(l)},y=t=>{const s=r.filter(a=>a.id!==t);n(s),i(s)},f=(t,s)=>{const a=r.map(l=>l.id===t?{...l,keyResults:l.keyResults.filter(d=>d.id!==s)}:l);n(a),i(a)},u=t=>t.keyResults.length===0?0:Math.round(t.keyResults.reduce((s,a)=>s+a.progress,0)/t.keyResults.length),k={"not-started":"bg-gray-100 dark:bg-gray-900 text-gray-800 dark:text-gray-100","in-progress":"bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-100",completed:"bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-100"};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900 p-3 rounded-lg text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:r.length}),e.jsx("div",{className:"text-xs text-blue-700 dark:text-blue-300",children:"Objectives"})]}),e.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900 p-3 rounded-lg text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:r.reduce((t,s)=>t+s.keyResults.length,0)}),e.jsx("div",{className:"text-xs text-purple-700 dark:text-purple-300",children:"Key Results"})]}),e.jsxs("div",{className:"bg-green-50 dark:bg-green-900 p-3 rounded-lg text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:r.filter(t=>t.status==="completed").length}),e.jsx("div",{className:"text-xs text-green-700 dark:text-green-300",children:"Completed"})]}),e.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900 p-3 rounded-lg text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:[r.length>0?Math.round(r.reduce((t,s)=>t+u(s),0)/r.length):0,"%"]}),e.jsx("div",{className:"text-xs text-orange-700 dark:text-orange-300",children:"Avg Progress"})]})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-4 rounded-lg space-y-3",children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100",children:"Add Objective"}),e.jsx("input",{type:"text",value:x,onChange:t=>g(t.target.value),onKeyPress:t=>t.key==="Enter"&&h(),placeholder:"e.g., Improve product performance...",className:"input-field"}),e.jsxs("button",{onClick:h,className:"btn-primary w-full",children:[e.jsx(R,{className:"w-4 h-4"})," Add Objective"]})]}),e.jsx("div",{className:"space-y-4",children:r.length===0?e.jsxs("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:[e.jsx(w,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No OKRs yet. Add your first objective to get started!"})]}):r.map(t=>e.jsxs("div",{className:"bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-lg p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100",children:t.objective}),e.jsxs("div",{className:"flex gap-2 mt-1",children:[e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${k[t.status]}`,children:t.status.replace("-"," ").toUpperCase()}),e.jsx("span",{className:"text-xs text-slate-600 dark:text-slate-400",children:t.quarter})]})]}),e.jsx("button",{onClick:()=>y(t.id),className:"text-slate-400 hover:text-red-500",children:e.jsx(K,{className:"w-4 h-4"})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Overall Progress"}),e.jsxs("span",{className:"font-semibold text-slate-900 dark:text-slate-100",children:[u(t),"%"]})]}),e.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all",style:{width:`${u(t)}%`}})})]}),e.jsxs("div",{className:"space-y-2 pt-2 border-t border-slate-200 dark:border-slate-700",children:[t.keyResults.map(s=>e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-2 rounded",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-sm text-slate-900 dark:text-slate-100",children:s.text}),e.jsx("button",{onClick:()=>f(t.id,s.id),className:"text-slate-400 hover:text-red-500",children:"×"})]}),e.jsx("input",{type:"range",min:"0",max:"100",value:s.progress,onChange:a=>N(t.id,s.id,Number(a.target.value)),className:"w-full h-1"}),e.jsxs("div",{className:"text-xs text-slate-600 dark:text-slate-400 mt-1",children:[s.progress,"%"]})]},s.id)),v===t.id?e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:o,onChange:s=>b(s.target.value),onKeyPress:s=>{s.key==="Enter"&&j(t.id)},placeholder:"Add key result...",className:"flex-1 px-2 py-1 text-sm border border-slate-300 dark:border-slate-600 rounded bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100",autoFocus:!0}),e.jsx("button",{onClick:()=>j(t.id),className:"px-2 py-1 bg-blue-500 text-white rounded text-sm font-medium hover:bg-blue-600",children:"+"}),e.jsx("button",{onClick:()=>p(null),className:"px-2 py-1 bg-slate-400 text-white rounded text-sm font-medium hover:bg-slate-500",children:"✕"})]}):e.jsx("button",{onClick:()=>p(t.id),className:"w-full py-1 px-2 text-sm border border-dashed border-slate-300 dark:border-slate-600 text-slate-600 dark:text-slate-400 hover:border-slate-400 dark:hover:border-slate-500 rounded",children:"+ Add Key Result"})]})]},t.id))})]})}export{A as default};
