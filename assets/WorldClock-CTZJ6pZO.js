import{r,j as e,X as A}from"./index-Ckx5g3CE.js";import{C as T}from"./clock-5Lxhj_l9.js";import{G as C}from"./globe-DhQu2Q1i.js";import{P}from"./plus-CQGEH8ka.js";const u=[{id:"utc",name:"UTC",timezone:"UTC"},{id:"ny",name:"New York",timezone:"America/New_York"},{id:"la",name:"Los Angeles",timezone:"America/Los_Angeles"},{id:"chicago",name:"Chicago",timezone:"America/Chicago"},{id:"toronto",name:"Toronto",timezone:"America/Toronto"},{id:"london",name:"London",timezone:"Europe/London"},{id:"paris",name:"Paris",timezone:"Europe/Paris"},{id:"berlin",name:"Berlin",timezone:"Europe/Berlin"},{id:"moscow",name:"Moscow",timezone:"Europe/Moscow"},{id:"tokyo",name:"Tokyo",timezone:"Asia/Tokyo"},{id:"shanghai",name:"Shanghai",timezone:"Asia/Shanghai"},{id:"hongkong",name:"Hong Kong",timezone:"Asia/Hong_Kong"},{id:"singapore",name:"Singapore",timezone:"Asia/Singapore"},{id:"mumbai",name:"Mumbai",timezone:"Asia/Kolkata"},{id:"dubai",name:"Dubai",timezone:"Asia/Dubai"},{id:"sydney",name:"Sydney",timezone:"Australia/Sydney"},{id:"auckland",name:"Auckland",timezone:"Pacific/Auckland"},{id:"saopaulo",name:"SÃ£o Paulo",timezone:"America/Sao_Paulo"}];function I(){const[i,f]=r.useState(()=>{const t=localStorage.getItem("worldClocks");if(t)try{return JSON.parse(t).filter(o=>u.some(a=>a.id===o.id))}catch{return[u[0]]}return[u[0]]}),[b,v]=r.useState({}),[g,p]=r.useState(""),[h,k]=r.useState(!1);r.useEffect(()=>{localStorage.setItem("worldClocks",JSON.stringify(i))},[i]),r.useEffect(()=>{try{p(Intl.DateTimeFormat().resolvedOptions().timeZone)}catch{p("Unknown")}},[]),r.useEffect(()=>{const t=()=>{const o={},a=new Date;i.forEach(n=>{try{const l=a.toLocaleString("en-US",{timeZone:n.timezone,hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0}),d=a.toLocaleString("en-US",{timeZone:n.timezone,weekday:"short",month:"short",day:"numeric"}),D=a.getTimezoneOffset(),S=new Date(a.toLocaleString("en-US",{timeZone:n.timezone})),y=new Date(a.toLocaleString("en-US",{timeZone:g||"UTC"})),w=S.getTime()-y.getTime(),m=Math.round(w/(1e3*60*60));let c="";m>0?c=`+${m}h`:m<0?c=`${m}h`:c="Same time",o[n.id]={time:l,date:d,offset:c}}catch{o[n.id]={time:"Invalid",date:"",offset:""}}}),v(o)};t();const s=setInterval(t,1e3);return()=>clearInterval(s)},[i,g]);const j=t=>{i.find(s=>s.id===t.id)||f([...i,t]),k(!1)},N=t=>{f(i.filter(s=>s.id!==t))},x=u.filter(t=>!i.find(s=>s.id===t.id)),z=t=>{var a;const s=((a=b[t])==null?void 0:a.time)||"",o=s.match(/^(\d+):/);if(o){const n=parseInt(o[1]),l=s.includes("PM"),d=l&&n!==12?n+12:!l&&n===12?0:n;return d>=6&&d<18}return!0};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/30 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm text-blue-800 dark:text-blue-100",children:[e.jsx(T,{className:"w-4 h-4"}),e.jsx("strong",{children:"Your timezone:"})," ",g]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.map(t=>{const s=b[t.id],o=z(t.id);return e.jsxs("div",{className:`card relative overflow-hidden ${o?"bg-gradient-to-br from-yellow-50 to-orange-50 dark:from-slate-800 dark:to-slate-700":"bg-gradient-to-br from-indigo-50 to-purple-50 dark:from-slate-900 dark:to-slate-800"}`,children:[e.jsx("div",{className:"absolute top-2 left-2 text-lg",children:o?"â˜€ï¸":"ðŸŒ™"}),e.jsx("button",{onClick:()=>N(t.id),className:"absolute top-2 right-2 p-1 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors",title:"Remove clock",children:e.jsx(A,{className:"w-4 h-4"})}),e.jsxs("div",{className:"pt-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx(C,{className:"w-5 h-5 text-blue-500"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100",children:t.name}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:t.timezone})]})]}),e.jsx("div",{className:"text-3xl font-mono font-bold text-blue-600 dark:text-blue-400",children:(s==null?void 0:s.time)||"Loading..."}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-400",children:(s==null?void 0:s.date)||""}),(s==null?void 0:s.offset)&&e.jsx("span",{className:`text-xs px-2 py-1 rounded-full font-medium ${s.offset==="Same time"?"bg-green-100 dark:bg-green-900/50 text-green-700 dark:text-green-300":"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200"}`,children:s.offset})]})]})]},t.id)})}),e.jsxs("div",{className:"card",children:[e.jsxs("button",{onClick:()=>k(!h),className:"w-full flex items-center justify-center gap-2 text-slate-700 dark:text-slate-300 hover:text-blue-600 dark:hover:text-blue-400 transition-colors",children:[e.jsx(P,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"Add Timezone"})]}),h&&x.length>0&&e.jsx("div",{className:"mt-4 pt-4 border-t border-slate-200 dark:border-slate-700",children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2",children:x.map(t=>e.jsx("button",{onClick:()=>j(t),className:"btn-secondary text-sm hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors",children:t.name},t.id))})}),h&&x.length===0&&e.jsx("div",{className:"mt-4 pt-4 border-t border-slate-200 dark:border-slate-700 text-center text-slate-500",children:"All timezones have been added!"})]})]})}export{I as default};
