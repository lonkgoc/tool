import{r,j as e,L as $}from"./index-Ckx5g3CE.js";import{g as F,v as L,G as A}from"./pdf-BQWzvUHG.js";import{I as w}from"./image-DfkwIUvq.js";import{U as R}from"./upload-BeZbD1lf.js";import{A as U}from"./alert-circle-CwdPxsKy.js";import{D as _}from"./download-CBMF7h4P.js";A.workerSrc=`https://unpkg.com/pdfjs-dist@${L}/build/pdf.worker.min.mjs`;function Q(){const[a,h]=r.useState(null),[c,f]=r.useState(!1),[b,o]=r.useState(""),[n,i]=r.useState([]),[j,d]=r.useState(0),[u,y]=r.useState(2),p=r.useRef(null),k=t=>{var l;const s=(l=t.target.files)==null?void 0:l[0];s&&s.type==="application/pdf"&&(h(s),o(""),i([]),d(0))},C=async()=>{if(a){f(!0),o(""),i([]),d(0);try{const t=await a.arrayBuffer(),s=await F({data:t}).promise,l=s.numPages,N=[];for(let m=1;m<=l;m++){const v=await s.getPage(m),g=v.getViewport({scale:u}),x=document.createElement("canvas"),E=x.getContext("2d");x.width=g.width,x.height=g.height,await v.render({canvasContext:E,viewport:g}).promise;const I=x.toDataURL("image/png");N.push(I),d(Math.round(m/l*100))}i(N)}catch(t){o(t.message||"Error converting PDF")}finally{f(!1)}}},P=t=>{const s=document.createElement("a");s.href=n[t],s.download=`${a==null?void 0:a.name.replace(".pdf","")}_page_${t+1}.png`,s.click()},D=()=>{n.forEach((t,s)=>{setTimeout(()=>{const l=document.createElement("a");l.href=t,l.download=`${a==null?void 0:a.name.replace(".pdf","")}_page_${s+1}.png`,l.click()},s*200)})},S=()=>{h(null),i([]),o(""),d(0),p.current&&(p.current.value="")};return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"card",children:[e.jsxs("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100 mb-6 flex items-center gap-2",children:[e.jsx(w,{className:"w-6 h-6 text-blue-500"}),"PDF to Images"]}),e.jsxs("label",{className:"cursor-pointer block mb-4",children:[e.jsx("input",{ref:p,type:"file",accept:".pdf",onChange:k,className:"hidden"}),e.jsx("div",{className:"flex items-center justify-center p-8 border-2 border-dashed border-slate-300 dark:border-slate-600 rounded-xl hover:border-blue-500 transition-colors",children:e.jsxs("div",{className:"text-center",children:[e.jsx(R,{className:"w-12 h-12 mx-auto mb-4 text-slate-400"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:a?a.name:"Click to upload PDF"})]})})]}),a&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Quality Scale: ",u,"x"]}),e.jsx("input",{type:"range",min:"1",max:"4",step:"0.5",value:u,onChange:t=>y(Number(t.target.value)),className:"w-full"}),e.jsxs("div",{className:"flex justify-between text-xs text-slate-500",children:[e.jsx("span",{children:"Low (1x)"}),e.jsx("span",{children:"High (4x)"})]})]}),b&&e.jsxs("div",{className:"mb-4 p-4 bg-red-50 dark:bg-red-900/20 text-red-600 rounded-xl flex items-center gap-2",children:[e.jsx(U,{className:"w-5 h-5"}),b]}),e.jsxs("button",{onClick:C,disabled:!a||c,className:"btn-primary w-full flex items-center justify-center gap-2 disabled:opacity-50 mb-4",children:[c?e.jsx($,{className:"w-5 h-5 animate-spin"}):e.jsx(w,{className:"w-5 h-5"}),c?`Converting... ${j}%`:"Convert to Images"]}),c&&e.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all",style:{width:`${j}%`}})}),n.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"font-medium",children:[n.length," Pages Converted"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:D,className:"btn-secondary text-sm",children:"Download All"}),e.jsx("button",{onClick:S,className:"btn-secondary text-sm",children:"Clear"})]})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:n.map((t,s)=>e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:t,alt:`Page ${s+1}`,className:"rounded border border-slate-200 dark:border-slate-700 w-full"}),e.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center rounded",children:e.jsxs("button",{onClick:()=>P(s),className:"bg-white text-slate-900 px-3 py-2 rounded-lg text-sm font-medium",children:[e.jsx(_,{className:"w-4 h-4 inline mr-1"})," Page ",s+1]})}),e.jsxs("div",{className:"text-center text-sm text-slate-500 mt-1",children:["Page ",s+1]})]},s))})]})]})})}export{Q as default};
