import{c as $,g as I,r as y,j as i}from"./index-Ckx5g3CE.js";import{U as L}from"./upload-BeZbD1lf.js";import{C as E}from"./copy-D3GgtY91.js";import{D as H}from"./download-CBMF7h4P.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=$("FolderSearch",[["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["path",{d:"M10.7 20H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v4.1",key:"1bw5m7"}],["path",{d:"m21 21-1.5-1.5",key:"3sg1j"}]]);var M={exports:{}};(function(d,F){(function(j){d.exports=j()})(function(j){var v=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function f(a,n){var t=a[0],e=a[1],s=a[2],r=a[3];t+=(e&s|~e&r)+n[0]-680876936|0,t=(t<<7|t>>>25)+e|0,r+=(t&e|~t&s)+n[1]-389564586|0,r=(r<<12|r>>>20)+t|0,s+=(r&t|~r&e)+n[2]+606105819|0,s=(s<<17|s>>>15)+r|0,e+=(s&r|~s&t)+n[3]-1044525330|0,e=(e<<22|e>>>10)+s|0,t+=(e&s|~e&r)+n[4]-176418897|0,t=(t<<7|t>>>25)+e|0,r+=(t&e|~t&s)+n[5]+1200080426|0,r=(r<<12|r>>>20)+t|0,s+=(r&t|~r&e)+n[6]-1473231341|0,s=(s<<17|s>>>15)+r|0,e+=(s&r|~s&t)+n[7]-45705983|0,e=(e<<22|e>>>10)+s|0,t+=(e&s|~e&r)+n[8]+1770035416|0,t=(t<<7|t>>>25)+e|0,r+=(t&e|~t&s)+n[9]-1958414417|0,r=(r<<12|r>>>20)+t|0,s+=(r&t|~r&e)+n[10]-42063|0,s=(s<<17|s>>>15)+r|0,e+=(s&r|~s&t)+n[11]-1990404162|0,e=(e<<22|e>>>10)+s|0,t+=(e&s|~e&r)+n[12]+1804603682|0,t=(t<<7|t>>>25)+e|0,r+=(t&e|~t&s)+n[13]-40341101|0,r=(r<<12|r>>>20)+t|0,s+=(r&t|~r&e)+n[14]-1502002290|0,s=(s<<17|s>>>15)+r|0,e+=(s&r|~s&t)+n[15]+1236535329|0,e=(e<<22|e>>>10)+s|0,t+=(e&r|s&~r)+n[1]-165796510|0,t=(t<<5|t>>>27)+e|0,r+=(t&s|e&~s)+n[6]-1069501632|0,r=(r<<9|r>>>23)+t|0,s+=(r&e|t&~e)+n[11]+643717713|0,s=(s<<14|s>>>18)+r|0,e+=(s&t|r&~t)+n[0]-373897302|0,e=(e<<20|e>>>12)+s|0,t+=(e&r|s&~r)+n[5]-701558691|0,t=(t<<5|t>>>27)+e|0,r+=(t&s|e&~s)+n[10]+38016083|0,r=(r<<9|r>>>23)+t|0,s+=(r&e|t&~e)+n[15]-660478335|0,s=(s<<14|s>>>18)+r|0,e+=(s&t|r&~t)+n[4]-405537848|0,e=(e<<20|e>>>12)+s|0,t+=(e&r|s&~r)+n[9]+568446438|0,t=(t<<5|t>>>27)+e|0,r+=(t&s|e&~s)+n[14]-1019803690|0,r=(r<<9|r>>>23)+t|0,s+=(r&e|t&~e)+n[3]-187363961|0,s=(s<<14|s>>>18)+r|0,e+=(s&t|r&~t)+n[8]+1163531501|0,e=(e<<20|e>>>12)+s|0,t+=(e&r|s&~r)+n[13]-1444681467|0,t=(t<<5|t>>>27)+e|0,r+=(t&s|e&~s)+n[2]-51403784|0,r=(r<<9|r>>>23)+t|0,s+=(r&e|t&~e)+n[7]+1735328473|0,s=(s<<14|s>>>18)+r|0,e+=(s&t|r&~t)+n[12]-1926607734|0,e=(e<<20|e>>>12)+s|0,t+=(e^s^r)+n[5]-378558|0,t=(t<<4|t>>>28)+e|0,r+=(t^e^s)+n[8]-2022574463|0,r=(r<<11|r>>>21)+t|0,s+=(r^t^e)+n[11]+1839030562|0,s=(s<<16|s>>>16)+r|0,e+=(s^r^t)+n[14]-35309556|0,e=(e<<23|e>>>9)+s|0,t+=(e^s^r)+n[1]-1530992060|0,t=(t<<4|t>>>28)+e|0,r+=(t^e^s)+n[4]+1272893353|0,r=(r<<11|r>>>21)+t|0,s+=(r^t^e)+n[7]-155497632|0,s=(s<<16|s>>>16)+r|0,e+=(s^r^t)+n[10]-1094730640|0,e=(e<<23|e>>>9)+s|0,t+=(e^s^r)+n[13]+681279174|0,t=(t<<4|t>>>28)+e|0,r+=(t^e^s)+n[0]-358537222|0,r=(r<<11|r>>>21)+t|0,s+=(r^t^e)+n[3]-722521979|0,s=(s<<16|s>>>16)+r|0,e+=(s^r^t)+n[6]+76029189|0,e=(e<<23|e>>>9)+s|0,t+=(e^s^r)+n[9]-640364487|0,t=(t<<4|t>>>28)+e|0,r+=(t^e^s)+n[12]-421815835|0,r=(r<<11|r>>>21)+t|0,s+=(r^t^e)+n[15]+530742520|0,s=(s<<16|s>>>16)+r|0,e+=(s^r^t)+n[2]-995338651|0,e=(e<<23|e>>>9)+s|0,t+=(s^(e|~r))+n[0]-198630844|0,t=(t<<6|t>>>26)+e|0,r+=(e^(t|~s))+n[7]+1126891415|0,r=(r<<10|r>>>22)+t|0,s+=(t^(r|~e))+n[14]-1416354905|0,s=(s<<15|s>>>17)+r|0,e+=(r^(s|~t))+n[5]-57434055|0,e=(e<<21|e>>>11)+s|0,t+=(s^(e|~r))+n[12]+1700485571|0,t=(t<<6|t>>>26)+e|0,r+=(e^(t|~s))+n[3]-1894986606|0,r=(r<<10|r>>>22)+t|0,s+=(t^(r|~e))+n[10]-1051523|0,s=(s<<15|s>>>17)+r|0,e+=(r^(s|~t))+n[1]-2054922799|0,e=(e<<21|e>>>11)+s|0,t+=(s^(e|~r))+n[8]+1873313359|0,t=(t<<6|t>>>26)+e|0,r+=(e^(t|~s))+n[15]-30611744|0,r=(r<<10|r>>>22)+t|0,s+=(t^(r|~e))+n[6]-1560198380|0,s=(s<<15|s>>>17)+r|0,e+=(r^(s|~t))+n[13]+1309151649|0,e=(e<<21|e>>>11)+s|0,t+=(s^(e|~r))+n[4]-145523070|0,t=(t<<6|t>>>26)+e|0,r+=(e^(t|~s))+n[11]-1120210379|0,r=(r<<10|r>>>22)+t|0,s+=(t^(r|~e))+n[2]+718787259|0,s=(s<<15|s>>>17)+r|0,e+=(r^(s|~t))+n[9]-343485551|0,e=(e<<21|e>>>11)+s|0,a[0]=t+a[0]|0,a[1]=e+a[1]|0,a[2]=s+a[2]|0,a[3]=r+a[3]|0}function w(a){var n=[],t;for(t=0;t<64;t+=4)n[t>>2]=a.charCodeAt(t)+(a.charCodeAt(t+1)<<8)+(a.charCodeAt(t+2)<<16)+(a.charCodeAt(t+3)<<24);return n}function B(a){var n=[],t;for(t=0;t<64;t+=4)n[t>>2]=a[t]+(a[t+1]<<8)+(a[t+2]<<16)+(a[t+3]<<24);return n}function A(a){var n=a.length,t=[1732584193,-271733879,-1732584194,271733878],e,s,r,l,h,o;for(e=64;e<=n;e+=64)f(t,w(a.substring(e-64,e)));for(a=a.substring(e-64),s=a.length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e=0;e<s;e+=1)r[e>>2]|=a.charCodeAt(e)<<(e%4<<3);if(r[e>>2]|=128<<(e%4<<3),e>55)for(f(t,r),e=0;e<16;e+=1)r[e]=0;return l=n*8,l=l.toString(16).match(/(.*?)(.{0,8})$/),h=parseInt(l[2],16),o=parseInt(l[1],16)||0,r[14]=h,r[15]=o,f(t,r),t}function x(a){var n=a.length,t=[1732584193,-271733879,-1732584194,271733878],e,s,r,l,h,o;for(e=64;e<=n;e+=64)f(t,B(a.subarray(e-64,e)));for(a=e-64<n?a.subarray(e-64):new Uint8Array(0),s=a.length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],e=0;e<s;e+=1)r[e>>2]|=a[e]<<(e%4<<3);if(r[e>>2]|=128<<(e%4<<3),e>55)for(f(t,r),e=0;e<16;e+=1)r[e]=0;return l=n*8,l=l.toString(16).match(/(.*?)(.{0,8})$/),h=parseInt(l[2],16),o=parseInt(l[1],16)||0,r[14]=h,r[15]=o,f(t,r),t}function _(a){var n="",t;for(t=0;t<4;t+=1)n+=v[a>>t*8+4&15]+v[a>>t*8&15];return n}function p(a){var n;for(n=0;n<a.length;n+=1)a[n]=_(a[n]);return a.join("")}p(A("hello")),typeof ArrayBuffer<"u"&&!ArrayBuffer.prototype.slice&&function(){function a(n,t){return n=n|0||0,n<0?Math.max(n+t,0):Math.min(n,t)}ArrayBuffer.prototype.slice=function(n,t){var e=this.byteLength,s=a(n,e),r=e,l,h,o,u;return t!==j&&(r=a(t,e)),s>r?new ArrayBuffer(0):(l=r-s,h=new ArrayBuffer(l),o=new Uint8Array(h),u=new Uint8Array(this,s,l),o.set(u),h)}}();function g(a){return/[\u0080-\uFFFF]/.test(a)&&(a=unescape(encodeURIComponent(a))),a}function U(a,n){var t=a.length,e=new ArrayBuffer(t),s=new Uint8Array(e),r;for(r=0;r<t;r+=1)s[r]=a.charCodeAt(r);return n?s:e}function z(a){return String.fromCharCode.apply(null,new Uint8Array(a))}function D(a,n,t){var e=new Uint8Array(a.byteLength+n.byteLength);return e.set(new Uint8Array(a)),e.set(new Uint8Array(n),a.byteLength),e}function m(a){var n=[],t=a.length,e;for(e=0;e<t-1;e+=2)n.push(parseInt(a.substr(e,2),16));return String.fromCharCode.apply(String,n)}function c(){this.reset()}return c.prototype.append=function(a){return this.appendBinary(g(a)),this},c.prototype.appendBinary=function(a){this._buff+=a,this._length+=a.length;var n=this._buff.length,t;for(t=64;t<=n;t+=64)f(this._hash,w(this._buff.substring(t-64,t)));return this._buff=this._buff.substring(t-64),this},c.prototype.end=function(a){var n=this._buff,t=n.length,e,s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],r;for(e=0;e<t;e+=1)s[e>>2]|=n.charCodeAt(e)<<(e%4<<3);return this._finish(s,t),r=p(this._hash),a&&(r=m(r)),this.reset(),r},c.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},c.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},c.prototype.setState=function(a){return this._buff=a.buff,this._length=a.length,this._hash=a.hash,this},c.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},c.prototype._finish=function(a,n){var t=n,e,s,r;if(a[t>>2]|=128<<(t%4<<3),t>55)for(f(this._hash,a),t=0;t<16;t+=1)a[t]=0;e=this._length*8,e=e.toString(16).match(/(.*?)(.{0,8})$/),s=parseInt(e[2],16),r=parseInt(e[1],16)||0,a[14]=s,a[15]=r,f(this._hash,a)},c.hash=function(a,n){return c.hashBinary(g(a),n)},c.hashBinary=function(a,n){var t=A(a),e=p(t);return n?m(e):e},c.ArrayBuffer=function(){this.reset()},c.ArrayBuffer.prototype.append=function(a){var n=D(this._buff.buffer,a),t=n.length,e;for(this._length+=a.byteLength,e=64;e<=t;e+=64)f(this._hash,B(n.subarray(e-64,e)));return this._buff=e-64<t?new Uint8Array(n.buffer.slice(e-64)):new Uint8Array(0),this},c.ArrayBuffer.prototype.end=function(a){var n=this._buff,t=n.length,e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],s,r;for(s=0;s<t;s+=1)e[s>>2]|=n[s]<<(s%4<<3);return this._finish(e,t),r=p(this._hash),a&&(r=m(r)),this.reset(),r},c.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},c.ArrayBuffer.prototype.getState=function(){var a=c.prototype.getState.call(this);return a.buff=z(a.buff),a},c.ArrayBuffer.prototype.setState=function(a){return a.buff=U(a.buff,!0),c.prototype.setState.call(this,a)},c.ArrayBuffer.prototype.destroy=c.prototype.destroy,c.ArrayBuffer.prototype._finish=c.prototype._finish,c.ArrayBuffer.hash=function(a,n){var t=x(new Uint8Array(a)),e=p(t);return n?m(e):e},c})})(M);var G=M.exports;const T=I(G);function V(){const[d,F]=y.useState([]),[j,v]=y.useState(!1),[f,w]=y.useState(0),[B,A]=y.useState(0),[x,_]=y.useState(new Map),p=y.useRef(null),g=y.useRef(!1),U=async e=>new Promise((s,r)=>{const h=Math.ceil(e.size/2097152),o=new T.ArrayBuffer,u=new FileReader;let b=0;u.onload=N=>{var C;if(g.current){r(new Error("Aborted"));return}(C=N.target)!=null&&C.result&&o.append(N.target.result),b++,b<h?S():s(o.end())},u.onerror=()=>r(new Error("Error reading file"));const S=()=>{const N=b*2097152,C=N+2097152>=e.size?e.size:N+2097152,R=e.slice(N,C);u.readAsArrayBuffer(R)};S()}),z=async e=>{const s=Array.from(e.target.files||[]);if(s.length===0)return;v(!0),w(0),A(0),_(new Map),g.current=!1;const r=[];try{for(let l=0;l<s.length&&!g.current;l++){const h=s[l];A(l+1);try{const o=await U(h);r.push({id:Date.now().toString()+l,name:h.name,size:h.size,hash:o,file:h}),w(Math.round((l+1)/s.length*100))}catch(o){if(o.message==="Aborted")break;console.error("Error hashing file:",h.name,o)}}}finally{if(!g.current&&r.length>0){const l=new Map;r.forEach(o=>{const u=l.get(o.hash)||[];u.push(o),l.set(o.hash,u)});const h=new Map;l.forEach((o,u)=>{o.length>1&&(h.set(u,o),o.forEach((b,S)=>{b.isDuplicate=S>0,S>0&&(b.duplicateOf=o[0].name)}))}),F(r),_(h)}v(!1),p.current&&(p.current.value="")}},D=()=>{g.current=!0,v(!1)},m=e=>e<1024?e+" B":e<1024*1024?(e/1024).toFixed(2)+" KB":(e/(1024*1024)).toFixed(2)+" MB";d.reduce((e,s)=>e+s.size,0);const c=d.filter(e=>e.isDuplicate).reduce((e,s)=>e+s.size,0),a=d.filter(e=>e.isDuplicate).length,n=()=>{let e=`=== Duplicate File Report ===

`;e+=`Total Files: ${d.length}
`,e+=`Duplicate Files: ${a}
`,e+=`Wasted Space: ${m(c)}

`,x.size>0&&(e+=`=== Duplicate Groups ===

`,x.forEach((h,o)=>{e+=`Hash: ${o} (Size: ${m(h[0].size)})
`,h.forEach((u,b)=>{e+=`  ${b===0?"(Original)":"(Duplicate)"} ${u.name}
`}),e+=`
`}));const s=new Blob([e],{type:"text/plain"}),r=URL.createObjectURL(s),l=document.createElement("a");l.href=r,l.download="duplicate-report.txt",l.click(),URL.revokeObjectURL(r)},t=()=>{F([]),_(new Map)};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"card",children:[i.jsxs("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100 mb-6 flex items-center gap-2",children:[i.jsx(O,{className:"w-6 h-6 text-yellow-500"}),"Duplicate File Finder"]}),i.jsxs("label",{className:"cursor-pointer block mb-6",children:[i.jsx("input",{ref:p,type:"file",multiple:!0,onChange:z,className:"hidden"}),i.jsx("div",{className:"flex items-center justify-center p-8 border-2 border-dashed border-slate-300 dark:border-slate-600 rounded-xl hover:border-yellow-500 transition-colors",children:i.jsxs("div",{className:"text-center",children:[i.jsx(L,{className:"w-12 h-12 mx-auto mb-4 text-slate-400"}),i.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Click to select multiple files"}),i.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Large files are supported via memory-efficient chunked hashing"})]})})]}),j&&i.jsxs("div",{className:"mb-6 p-4 bg-slate-50 dark:bg-slate-800 rounded-xl",children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsxs("span",{className:"font-medium text-sm",children:["Processing file ",B,"..."]}),i.jsxs("span",{className:"text-sm text-slate-500",children:[f,"%"]})]}),i.jsx("div",{className:"h-2 bg-slate-200 dark:bg-slate-700 rounded-full overflow-hidden mb-4",children:i.jsx("div",{className:"h-full bg-yellow-500 transition-all duration-300",style:{width:`${f}%`}})}),i.jsx("button",{onClick:D,className:"btn-secondary text-sm w-full",children:"Cancel Analysis"})]}),d.length>0&&!j&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-4 rounded-xl text-center",children:[i.jsx("div",{className:"text-3xl font-bold text-slate-700 dark:text-slate-300",children:d.length}),i.jsx("div",{className:"text-sm text-slate-500",children:"Total Files"})]}),i.jsxs("div",{className:`p-4 rounded-xl text-center ${a>0?"bg-red-50 dark:bg-red-900/30":"bg-green-50 dark:bg-green-900/30"}`,children:[i.jsx("div",{className:`text-3xl font-bold ${a>0?"text-red-600":"text-green-600"}`,children:a}),i.jsx("div",{className:"text-sm text-slate-500",children:"Duplicates"})]}),i.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-4 rounded-xl text-center",children:[i.jsx("div",{className:"text-xl font-bold text-slate-700 dark:text-slate-300",children:m(c)}),i.jsx("div",{className:"text-sm text-slate-500",children:"Wasted Space"})]})]}),x.size>0&&i.jsxs("div",{className:"mb-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[i.jsx(E,{className:"w-5 h-5 text-red-500"}),"Duplicate Groups (",x.size,")"]}),i.jsxs("button",{onClick:n,className:"btn-secondary text-sm flex items-center gap-1",children:[i.jsx(H,{className:"w-4 h-4"})," Export Report"]})]}),i.jsx("div",{className:"space-y-4",children:Array.from(x.entries()).map(([e,s])=>i.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 p-4 rounded-xl",children:[i.jsxs("div",{className:"text-xs text-slate-500 mb-2 font-mono",children:["Hash: ",e.substring(0,32),"..."]}),i.jsx("div",{className:"space-y-2",children:s.map((r,l)=>i.jsxs("div",{className:`flex items-center justify-between p-2 rounded ${l===0?"bg-white dark:bg-slate-800":"bg-red-100 dark:bg-red-900/40"}`,children:[i.jsxs("div",{className:"flex items-center gap-2",children:[l>0&&i.jsx(E,{className:"w-4 h-4 text-red-500"}),i.jsx("span",{className:l===0?"font-medium":"text-red-600",children:r.name})]}),i.jsx("span",{className:"text-sm text-slate-500",children:m(r.size)})]},r.id))})]},e))})]}),x.size===0&&i.jsxs("div",{className:"mb-6 p-6 bg-green-50 dark:bg-green-900/30 rounded-xl text-center",children:[i.jsx("div",{className:"text-5xl mb-2",children:"âœ“"}),i.jsx("div",{className:"text-lg font-medium text-green-600",children:"No Duplicates Found!"}),i.jsxs("div",{className:"text-sm text-slate-500",children:["All ",d.length," files are unique"]})]}),i.jsx("button",{onClick:t,className:"btn-secondary w-full",children:"Clear & Start Over"})]})]}),i.jsxs("div",{className:"text-sm text-slate-500 dark:text-slate-400 bg-slate-50 dark:bg-slate-800/50 rounded-xl p-4",children:[i.jsx("p",{className:"font-medium mb-2",children:"How it works:"}),i.jsx("p",{children:"Files are compared using SHA-256 hash of their content calculated in chunks. This ensures 100% accuracy while keeping memory usage low for large files."})]})]})}export{V as default};
