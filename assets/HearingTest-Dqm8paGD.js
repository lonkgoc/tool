import{r as l,j as e}from"./index-Ckx5g3CE.js";import{V as p}from"./volume-2-C0vhuSbN.js";import{P as h}from"./pause-D3u-dulZ.js";import{P as j}from"./play-BTI2RwOU.js";function w(){const[c,d]=l.useState(1e3),[r,m]=l.useState(!1),[o,x]=l.useState(.5),s=l.useRef(null),n=l.useRef(null);l.useEffect(()=>()=>{n.current&&n.current.stop(),s.current&&s.current.close()},[]);const i=()=>{s.current||(s.current=new(window.AudioContext||window.webkitAudioContext)),n.current&&n.current.stop();const t=s.current.createOscillator(),a=s.current.createGain();t.type="sine",t.frequency.value=c,a.gain.value=o,t.connect(a),a.connect(s.current.destination),t.start(),n.current=t,m(!0)},u=()=>{n.current&&(n.current.stop(),n.current=null),m(!1)},f=()=>{r?u():i()};return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"card",children:[e.jsxs("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100 mb-4 flex items-center space-x-2",children:[e.jsx(p,{className:"w-6 h-6"}),e.jsx("span",{children:"Hearing Test"})]}),e.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-xl p-4 mb-6",children:e.jsx("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:"⚠️ Warning: Start with low volume and adjust gradually. This is not a medical test."})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Frequency: ",c," Hz"]}),e.jsx("input",{type:"range",min:"20",max:"20000",step:"10",value:c,onChange:t=>{d(Number(t.target.value)),r&&(u(),setTimeout(i,100))},className:"w-full"}),e.jsxs("div",{className:"flex justify-between text-xs text-slate-500 mt-1",children:[e.jsx("span",{children:"20 Hz"}),e.jsx("span",{children:"20,000 Hz"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Volume: ",Math.round(o*100),"%"]}),e.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:o,onChange:t=>{if(x(Number(t.target.value)),n.current&&s.current){const a=s.current.createGain();a.gain.value=Number(t.target.value),n.current.connect(a),a.connect(s.current.destination)}},className:"w-full"})]}),e.jsxs("button",{onClick:f,className:`btn-primary w-full flex items-center justify-center space-x-2 ${r?"bg-red-500 hover:bg-red-600":""}`,children:[r?e.jsx(h,{className:"w-5 h-5"}):e.jsx(j,{className:"w-5 h-5"}),e.jsx("span",{children:r?"Stop Tone":"Play Tone"})]})]}),e.jsx("div",{className:"mt-6 grid grid-cols-4 gap-2",children:[250,500,1e3,2e3,4e3,8e3].map(t=>e.jsxs("button",{onClick:()=>{d(t),r&&(u(),setTimeout(i,100))},className:"btn-secondary text-sm",children:[t," Hz"]},t))})]})})}export{w as default};
