import{r as l,j as e,L as O}from"./index-DqXMfBpZ.js";import{g as U,v as $,G as B}from"./pdf-BQWzvUHG.js";import{U as A}from"./upload-DyHvPoT9.js";import{F as v}from"./file-text-BAtexiN6.js";import{A as z}from"./alert-circle-B7aAIleE.js";import{D as G}from"./download-DfWGAFzS.js";import{C as W}from"./check-BUCBOD09.js";import{C as q}from"./copy-cQ1kXkXV.js";B.workerSrc=`https://unpkg.com/pdfjs-dist@${$}/build/pdf.worker.min.mjs`;function _(){const[r,m]=l.useState(null),[n,i]=l.useState(""),[u,j]=l.useState(!1),[g,o]=l.useState(""),[b,c]=l.useState(0),[h,p]=l.useState(0),[y,N]=l.useState(!1),f=l.useRef(null),w=s=>{var a;const t=(a=s.target.files)==null?void 0:a[0];t&&t.type==="application/pdf"?(m(t),o(""),i(""),c(0),p(0)):t&&o("Please select a valid PDF file")},k=s=>{var a;s.preventDefault();const t=(a=s.dataTransfer.files)==null?void 0:a[0];t&&t.type==="application/pdf"?(m(t),o(""),i(""),c(0),p(0)):t&&o("Please select a valid PDF file")},C=s=>{s.preventDefault()},D=async()=>{if(r){j(!0),o(""),i(""),c(0);try{const s=await r.arrayBuffer(),t=await U({data:s}).promise,a=t.numPages;p(a);let d="";for(let x=1;x<=a;x++){const L=(await(await t.getPage(x)).getTextContent()).items.map(R=>R.str).join(" ");d+=`--- Page ${x} ---
${L}

`,c(Math.round(x/a*100))}i(d.trim())}catch(s){console.error("PDF extraction error:",s),o(s.message||"Error extracting text from PDF")}finally{j(!1)}}},F=()=>{var d;const s=new Blob([n],{type:"text/plain;charset=utf-8"}),t=URL.createObjectURL(s),a=document.createElement("a");a.href=t,a.download=((d=r==null?void 0:r.name)==null?void 0:d.replace(".pdf",".txt"))||"extracted.txt",a.click(),URL.revokeObjectURL(t)},P=async()=>{try{await navigator.clipboard.writeText(n),N(!0),setTimeout(()=>N(!1),2e3)}catch(s){console.error("Copy failed:",s)}},S=()=>{m(null),i(""),o(""),c(0),p(0),f.current&&(f.current.value="")},T=n?n.split(/\s+/).filter(s=>s.length>0).length:0,E=n.length;return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{onDrop:k,onDragOver:C,className:"relative",children:e.jsxs("label",{className:"cursor-pointer block",children:[e.jsx("input",{ref:f,type:"file",accept:".pdf,application/pdf",onChange:w,className:"hidden"}),e.jsx("div",{className:"flex items-center justify-center p-8 border-2 border-dashed border-slate-300 dark:border-slate-600 rounded-xl hover:border-blue-500 transition-colors bg-slate-50 dark:bg-slate-800/50",children:e.jsxs("div",{className:"text-center",children:[e.jsx(A,{className:"w-12 h-12 mx-auto mb-4 text-slate-400"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-2",children:"Click to upload PDF or drag and drop"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Supports any PDF file"})]})})]})}),r&&e.jsxs("div",{className:"flex items-center justify-between p-4 bg-blue-50 dark:bg-blue-900/20 rounded-xl border border-blue-200 dark:border-blue-800",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(v,{className:"w-8 h-8 text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-slate-900 dark:text-slate-100",children:r.name}),e.jsxs("p",{className:"text-sm text-slate-500",children:[(r.size/1024).toFixed(1)," KB",h>0&&` • ${h} pages`]})]})]}),e.jsx("button",{onClick:S,className:"text-slate-500 hover:text-red-500 transition-colors",children:"✕"})]}),g&&e.jsxs("div",{className:"flex items-center gap-2 text-red-600 bg-red-50 dark:bg-red-900/20 p-4 rounded-xl border border-red-200 dark:border-red-800",children:[e.jsx(z,{className:"w-5 h-5 flex-shrink-0"}),e.jsx("span",{children:g})]}),e.jsx("button",{onClick:D,disabled:!r||u,className:"btn-primary w-full flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:u?e.jsxs(e.Fragment,{children:[e.jsx(O,{className:"w-5 h-5 animate-spin"}),e.jsxs("span",{children:["Extracting... ",b,"%"]})]}):e.jsxs(e.Fragment,{children:[e.jsx(v,{className:"w-5 h-5"}),e.jsx("span",{children:"Extract Text"})]})}),u&&e.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${b}%`}})}),n&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-4 text-sm text-slate-600 dark:text-slate-400",children:[e.jsxs("span",{children:[T.toLocaleString()," words"]}),e.jsxs("span",{children:[E.toLocaleString()," characters"]}),e.jsxs("span",{children:[h," pages"]})]}),e.jsx("div",{className:"relative",children:e.jsx("textarea",{value:n,readOnly:!0,rows:15,className:"w-full input-field font-mono text-sm resize-y",placeholder:"Extracted text will appear here..."})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:F,className:"btn-primary flex-1 flex items-center justify-center gap-2",children:[e.jsx(G,{className:"w-5 h-5"}),e.jsx("span",{children:"Download as .txt"})]}),e.jsx("button",{onClick:P,className:"btn-secondary flex items-center gap-2",children:y?e.jsxs(e.Fragment,{children:[e.jsx(W,{className:"w-5 h-5 text-green-500"}),e.jsx("span",{children:"Copied!"})]}):e.jsxs(e.Fragment,{children:[e.jsx(q,{className:"w-5 h-5"}),e.jsx("span",{children:"Copy"})]})})]})]}),e.jsxs("div",{className:"text-sm text-slate-500 dark:text-slate-400 bg-slate-50 dark:bg-slate-800/50 rounded-xl p-4",children:[e.jsx("p",{className:"font-medium mb-2",children:"About this tool:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[e.jsx("li",{children:"Extracts text content from PDF files directly in your browser"}),e.jsx("li",{children:"Your files are never uploaded to any server"}),e.jsx("li",{children:"Works with text-based PDFs (scanned images require OCR)"}),e.jsx("li",{children:"Preserves text order as closely as possible"})]})]})]})}export{_ as default};
