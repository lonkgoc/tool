import{r,j as e}from"./index-DqXMfBpZ.js";import{P as R}from"./plus-DXsQ2qju.js";import{R as J}from"./rotate-cw-7-UkqU1C.js";import{T as P}from"./trash-2-BVmSqRQv.js";function G(){var y,S;const[n,g]=r.useState(()=>{const t=localStorage.getItem("flashCards");return t?JSON.parse(t):[]}),[d,w]=r.useState(()=>{const t=localStorage.getItem("flashCardDecks");return t?JSON.parse(t):["Default"]}),[o,k]=r.useState("Default"),[m,C]=r.useState(""),[a,p]=r.useState({front:"",back:"",deck:"Default"}),[E,j]=r.useState(!1),[c,f]=r.useState(0),[v,u]=r.useState(!1);r.useEffect(()=>{localStorage.setItem("flashCards",JSON.stringify(n))},[n]),r.useEffect(()=>{localStorage.setItem("flashCardDecks",JSON.stringify(d))},[d]);const I=()=>{if(!a.front.trim()||!a.back.trim())return;const t={id:Date.now().toString(),front:a.front,back:a.back,deck:a.deck||o,interval:1,easeFactor:2.5,nextReview:new Date().toISOString().split("T")[0],repetitions:0,quality:0};g([...n,t]),p({front:"",back:"",deck:a.deck})},D=()=>{m.trim()&&(d.includes(m)||(w([...d,m]),k(m),C("")))},F=t=>{w(d.filter(s=>s!==t)),g(n.filter(s=>s.deck!==t)),o===t&&k(d[0]||"Default")},T=t=>{g(n.filter(s=>s.id!==t))},b=n.filter(t=>t.deck===o),i=b.filter(t=>new Date(t.nextReview)<=new Date),O=(t,s)=>{let x=s.easeFactor+.1-(5-t)*(.08+(5-t)*.02);x=Math.max(1.3,x);let l=1;s.repetitions===0?l=1:s.repetitions===1?l=3:l=Math.round(s.interval*x);const N=new Date;return N.setDate(N.getDate()+l),{interval:l,easeFactor:x,nextReview:N.toISOString().split("T")[0]}},A=t=>{const s=i[c];if(!s)return;const x=O(t,s);g(n.map(l=>l.id===s.id?{...l,...x,repetitions:l.repetitions+1,quality:t}:l)),c<i.length-1?(f(c+1),u(!1)):(j(!1),f(0),u(!1))},h={total:b.length,due:i.length,reviewed:b.filter(t=>t.repetitions>0).length},M=[{value:0,label:"Again"},{value:1,label:"Hard"},{value:2,label:"Good"},{value:3,label:"Easy"},{value:4,label:"Perfect"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-3",children:"Decks"}),e.jsx("div",{className:"flex gap-2 mb-3 overflow-x-auto pb-2",children:d.map(t=>e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsx("button",{onClick:()=>k(t),className:`px-4 py-2 rounded-lg font-medium transition-colors ${o===t?"bg-blue-500 text-white":"bg-slate-100 dark:bg-slate-800 text-slate-900 dark:text-slate-100 hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:t}),t!=="Default"&&e.jsx("button",{onClick:()=>F(t),className:"absolute -top-2 -right-2 bg-red-500 text-white w-5 h-5 rounded-full text-xs hover:bg-red-600",children:"âœ•"})]},t))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:m,onChange:t=>C(t.target.value),placeholder:"New deck name",className:"input-field flex-1",onKeyPress:t=>t.key==="Enter"&&D()}),e.jsx("button",{onClick:D,className:"btn-primary",children:e.jsx(R,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900 p-4 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:h.total}),e.jsx("div",{className:"text-sm text-purple-700 dark:text-purple-300",children:"Total Cards"})]}),e.jsxs("div",{className:"bg-red-50 dark:bg-red-900 p-4 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:h.due}),e.jsx("div",{className:"text-sm text-red-700 dark:text-red-300",children:"Due Today"})]}),e.jsxs("div",{className:"bg-green-50 dark:bg-green-900 p-4 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:h.reviewed}),e.jsx("div",{className:"text-sm text-green-700 dark:text-green-300",children:"Reviewed"})]})]}),E&&i.length>0?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h3",{className:"font-semibold text-slate-900 dark:text-slate-100",children:["Card ",c+1," / ",i.length]}),e.jsx("button",{onClick:()=>{j(!1),f(0),u(!1)},className:"text-sm text-slate-500 hover:text-slate-700",children:"Exit Review"})]}),e.jsx("button",{onClick:()=>u(!v),className:"w-full bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900 dark:to-indigo-900 border-2 border-blue-200 dark:border-blue-700 rounded-lg p-8 text-center min-h-64 flex items-center justify-center cursor-pointer hover:shadow-lg transition-shadow",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-4",children:v?"Answer":"Question"}),e.jsx("p",{className:"text-3xl font-bold text-slate-900 dark:text-slate-100",children:v?(y=i[c])==null?void 0:y.back:(S=i[c])==null?void 0:S.front}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-4",children:"Click to flip"})]})}),v&&e.jsx("div",{className:"grid grid-cols-5 gap-2",children:M.map(t=>e.jsx("button",{onClick:()=>A(t.value),className:`py-3 rounded-lg font-medium text-sm transition-colors ${t.value===0?"bg-red-500 hover:bg-red-600":t.value===1?"bg-orange-500 hover:bg-orange-600":t.value===2?"bg-yellow-500 hover:bg-yellow-600":t.value===3?"bg-green-500 hover:bg-green-600":"bg-blue-500 hover:bg-blue-600"} text-white`,children:t.label},t.value))})]}):e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 dark:from-blue-900 to-slate-50 dark:to-slate-900 border-2 border-blue-200 dark:border-blue-700 rounded-lg p-6 space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100",children:"New Card"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Deck"}),e.jsx("select",{value:a.deck||o,onChange:t=>p({...a,deck:t.target.value}),className:"input-field",children:d.map(t=>e.jsx("option",{value:t,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Front (Question)"}),e.jsx("textarea",{value:a.front,onChange:t=>p({...a,front:t.target.value}),placeholder:"Enter question or prompt...",className:"input-field resize-none h-24"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Back (Answer)"}),e.jsx("textarea",{value:a.back,onChange:t=>p({...a,back:t.target.value}),placeholder:"Enter answer or explanation...",className:"input-field resize-none h-24"})]}),e.jsxs("button",{onClick:I,className:"btn-primary w-full",children:[e.jsx(R,{className:"w-4 h-4"})," Add Card"]})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"font-semibold text-slate-900 dark:text-slate-100",children:[o," Cards"]}),h.due>0&&e.jsxs("button",{onClick:()=>{j(!0),f(0),u(!1)},className:"btn-primary text-sm",children:[e.jsx(J,{className:"w-4 h-4"})," Review (",h.due,")"]})]}),e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:b.length===0?e.jsx("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:"No cards in this deck"}):b.map(t=>{const s=new Date(t.nextReview)<=new Date;return e.jsx("div",{className:`p-3 rounded-lg border ${s?"bg-red-50 dark:bg-red-900 border-red-200 dark:border-red-700":"bg-slate-50 dark:bg-slate-800 border-slate-200 dark:border-slate-700"}`,children:e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-slate-900 dark:text-slate-100 text-sm line-clamp-1",children:t.front}),e.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 line-clamp-1",children:t.back}),e.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-500 mt-1",children:["Reps: ",t.repetitions," | Next: ",t.nextReview]})]}),e.jsx("button",{onClick:()=>T(t.id),className:"text-slate-400 hover:text-red-500 flex-shrink-0",children:e.jsx(P,{className:"w-4 h-4"})})]})},t.id)})})]})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900 border border-blue-200 dark:border-blue-700 rounded-lg p-4 text-sm text-blue-800 dark:text-blue-200",children:[e.jsx("strong",{children:"ðŸ“š Spaced Repetition (SM-2 Algorithm)"}),e.jsxs("ul",{className:"mt-2 space-y-1",children:[e.jsx("li",{children:"â€¢ Shows cards at optimal intervals"}),e.jsx("li",{children:"â€¢ Improves long-term memory retention"}),e.jsx("li",{children:'â€¢ Reviews "Due Today" cards regularly'}),e.jsx("li",{children:"â€¢ Rate each answer to adjust timing"})]})]})]})}export{G as default};
