import{r as x,j as t}from"./index-DrWj1tgA.js";import{U as $}from"./users-safFtiuO.js";import{D as P}from"./download-DZ1EfTSG.js";import{P as B}from"./plus-DPTEUXD6.js";import{T as C}from"./trash-2-DTZrw6Iv.js";import{D}from"./dollar-sign-CYrted7M.js";function J(){const[l,u]=x.useState(()=>{const e=localStorage.getItem("expenseSplitterPeople");return e?JSON.parse(e):[]}),[n,p]=x.useState(()=>{const e=localStorage.getItem("expenseSplitterExpenses");return e?JSON.parse(e):[]}),[b,f]=x.useState(""),[a,m]=x.useState({description:"",amount:"",paidBy:"",splitWith:[]});x.useEffect(()=>{localStorage.setItem("expenseSplitterPeople",JSON.stringify(l)),localStorage.setItem("expenseSplitterExpenses",JSON.stringify(n))},[l,n]);const g=()=>{b.trim()&&(u([...l,{id:Date.now().toString(),name:b.trim()}]),f(""))},N=e=>{u(l.filter(s=>s.id!==e)),p(n.filter(s=>s.paidBy!==e&&!s.splitWith.includes(e)))},v=()=>{!a.description||!a.amount||!a.paidBy||a.splitWith.length===0||(p([...n,{id:Date.now().toString(),description:a.description,amount:parseFloat(a.amount),paidBy:a.paidBy,splitWith:a.splitWith}]),m({description:"",amount:"",paidBy:"",splitWith:[]}))},y=e=>p(n.filter(s=>s.id!==e)),w=e=>{const s=a.splitWith;s.includes(e)?m({...a,splitWith:s.filter(i=>i!==e)}):m({...a,splitWith:[...s,e]})},d={};l.forEach(e=>{d[e.id]=0}),n.forEach(e=>{const s=e.amount/e.splitWith.length;e.splitWith.forEach(i=>{i===e.paidBy?d[i]+=e.amount-s:d[i]-=s}),e.splitWith.includes(e.paidBy)||(d[e.paidBy]+=e.amount)});const h=[],k=l.filter(e=>d[e.id]<-.01).map(e=>({...e,balance:d[e.id]})),E=l.filter(e=>d[e.id]>.01).map(e=>({...e,balance:d[e.id]}));k.forEach(e=>{let s=Math.abs(e.balance);E.forEach(i=>{if(s>.01&&i.balance>.01){const o=Math.min(s,i.balance);o>.01&&(h.push({from:e.id,to:i.id,amount:o}),s-=o,i.balance-=o)}})});const j=n.reduce((e,s)=>e+s.amount,0),c=e=>{var s;return((s=l.find(i=>i.id===e))==null?void 0:s.name)||"Unknown"},S=()=>{let e=`=== Expense Splitter Summary ===

`;e+=`Total Expenses: $${j.toFixed(2)}
`,e+=`Participants: ${l.map(r=>r.name).join(", ")}

`,e+=`=== Expenses ===
`,n.forEach(r=>{e+=`${r.description}: $${r.amount.toFixed(2)} (paid by ${c(r.paidBy)}, split with ${r.splitWith.map(c).join(", ")})
`}),e+=`
=== Settlements ===
`,h.forEach(r=>{e+=`${c(r.from)} owes ${c(r.to)}: $${r.amount.toFixed(2)}
`});const s=new Blob([e],{type:"text/plain"}),i=URL.createObjectURL(s),o=document.createElement("a");o.href=i,o.download="expense-split.txt",o.click(),URL.revokeObjectURL(i)},W=()=>{confirm("Clear all data?")&&(u([]),p([]))};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"card",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100 flex items-center gap-2",children:[t.jsx($,{className:"w-6 h-6 text-blue-500"}),"Expense Splitter"]}),t.jsx("div",{className:"flex gap-2",children:n.length>0&&t.jsxs("button",{onClick:S,className:"btn-secondary text-sm flex items-center gap-1",children:[t.jsx(P,{className:"w-4 h-4"})," Export"]})})]}),t.jsxs("div",{className:"mb-6",children:[t.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"Participants"}),t.jsxs("div",{className:"flex gap-2 mb-3",children:[t.jsx("input",{type:"text",value:b,onChange:e=>f(e.target.value),onKeyPress:e=>e.key==="Enter"&&g(),placeholder:"Add person name",className:"input-field flex-1"}),t.jsx("button",{onClick:g,className:"btn-primary",children:t.jsx(B,{className:"w-5 h-5"})})]}),t.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.map(e=>t.jsxs("span",{className:"flex items-center gap-1 px-3 py-1 bg-blue-100 dark:bg-blue-900/50 text-blue-800 dark:text-blue-200 rounded-full text-sm",children:[e.name,t.jsx("button",{onClick:()=>N(e.id),className:"hover:text-red-500",children:"Ã—"})]},e.id)),l.length===0&&t.jsx("span",{className:"text-sm text-slate-400",children:"Add participants first"})]})]}),l.length>=2&&t.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-4 rounded-lg mb-6",children:[t.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-3",children:"Add Expense"}),t.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[t.jsx("input",{type:"text",value:a.description,onChange:e=>m({...a,description:e.target.value}),placeholder:"Description (e.g., Dinner)",className:"input-field"}),t.jsx("input",{type:"number",value:a.amount,onChange:e=>m({...a,amount:e.target.value}),placeholder:"Amount ($)",className:"input-field"})]}),t.jsxs("div",{className:"mb-3",children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Paid by"}),t.jsxs("select",{value:a.paidBy,onChange:e=>m({...a,paidBy:e.target.value}),className:"input-field",children:[t.jsx("option",{value:"",children:"Select person"}),l.map(e=>t.jsx("option",{value:e.id,children:e.name},e.id))]})]}),t.jsxs("div",{className:"mb-3",children:[t.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Split with"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:l.map(e=>t.jsx("button",{onClick:()=>w(e.id),className:`px-3 py-1 rounded-full text-sm font-medium transition-colors ${a.splitWith.includes(e.id)?"bg-blue-500 text-white":"bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300"}`,children:e.name},e.id))})]}),t.jsx("button",{onClick:v,className:"btn-primary w-full",children:"Add Expense"})]}),n.length>0&&t.jsxs("div",{className:"mb-6",children:[t.jsxs("h3",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-3",children:["Expenses ($",j.toFixed(2)," total)"]}),t.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:n.map(e=>t.jsxs("div",{className:"flex items-center justify-between p-3 bg-white dark:bg-slate-900 rounded-lg border border-slate-200 dark:border-slate-700",children:[t.jsxs("div",{children:[t.jsx("div",{className:"font-medium",children:e.description}),t.jsxs("div",{className:"text-xs text-slate-500",children:["Paid by ",c(e.paidBy),", split with ",e.splitWith.map(c).join(", ")]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("span",{className:"font-bold text-lg",children:["$",e.amount.toFixed(2)]}),t.jsx("button",{onClick:()=>y(e.id),className:"text-red-400 hover:text-red-500",children:t.jsx(C,{className:"w-4 h-4"})})]})]},e.id))})]}),h.length>0&&t.jsxs("div",{className:"bg-green-50 dark:bg-green-900/30 p-4 rounded-lg",children:[t.jsxs("h3",{className:"font-semibold text-green-800 dark:text-green-200 mb-3 flex items-center gap-2",children:[t.jsx(D,{className:"w-5 h-5"})," Who Owes Whom"]}),t.jsx("div",{className:"space-y-2",children:h.map((e,s)=>t.jsxs("div",{className:"flex items-center justify-between p-2 bg-white dark:bg-slate-800 rounded-lg",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"font-medium text-red-600",children:c(e.from)}),t.jsx("span",{className:"text-slate-400",children:"â†’"}),t.jsx("span",{className:"font-medium text-green-600",children:c(e.to)})]}),t.jsxs("span",{className:"font-bold text-lg",children:["$",e.amount.toFixed(2)]})]},s))})]}),l.length>0&&t.jsx("button",{onClick:W,className:"w-full mt-4 text-sm text-red-500 hover:text-red-600",children:"Clear All Data"})]}),t.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/30 border border-blue-200 dark:border-blue-800 rounded-lg p-4 text-sm text-blue-800 dark:text-blue-100",children:[t.jsx("strong",{children:"ðŸ’¡ Tip:"})," Add all participants first, then add expenses. The calculator automatically determines who owes whom and by how much!"]})]})}export{J as default};
