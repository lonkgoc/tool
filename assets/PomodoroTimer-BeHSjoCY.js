import{r as s,j as e}from"./index-DrWj1tgA.js";import{P as O}from"./play-QS35GPs2.js";import{P as q}from"./pause-DByj3rES.js";import{R as L}from"./rotate-ccw-C4qMHSZh.js";import{V as z}from"./volume-2-DNBCU4Mi.js";import{V as G}from"./volume-x-DgV-2tzF.js";import{B as X}from"./bell-DgZ2TKvo.js";function Y(){const[a,C]=s.useState(()=>{const t=localStorage.getItem("pomodoroWorkMinutes");return t?Number(t):25}),[r,M]=s.useState(()=>{const t=localStorage.getItem("pomodoroBreakMinutes");return t?Number(t):5}),[i,x]=s.useState(()=>{const t=localStorage.getItem("pomodoroWorkMinutes");return(t?Number(t):25)*60}),[f,b]=s.useState(!1),[o,g]=s.useState(!1),[l,S]=s.useState(()=>{const t=localStorage.getItem("pomodoroSessions");return t?Number(t):0}),[c,I]=s.useState(!0),[v,w]=s.useState(null),m=s.useRef(null),k=s.useRef(null);s.useEffect(()=>{localStorage.setItem("pomodoroWorkMinutes",String(a))},[a]),s.useEffect(()=>{localStorage.setItem("pomodoroBreakMinutes",String(r))},[r]),s.useEffect(()=>{localStorage.setItem("pomodoroSessions",String(l))},[l]);const j=s.useCallback(()=>{if(c)try{k.current||(k.current=new(window.AudioContext||window.webkitAudioContext));const t=k.current,n=(N,p,T)=>{const d=t.createOscillator(),h=t.createGain();d.frequency.setValueAtTime(N,t.currentTime),d.type="sine",h.gain.setValueAtTime(.3,t.currentTime+p),h.gain.exponentialRampToValueAtTime(.01,t.currentTime+p+T),d.connect(h),h.connect(t.destination),d.start(t.currentTime+p),d.stop(t.currentTime+p+T)};n(880,0,.3),n(1047,.15,.3),n(1319,.3,.5)}catch{console.log("Audio not supported")}},[c]),u=s.useCallback(t=>{w(t),setTimeout(()=>w(null),3e3)},[]);s.useEffect(()=>(f&&i>0?m.current=window.setInterval(()=>{x(t=>t<=1?(b(!1),j(),o?(g(!1),u("â˜• Break over! Ready for another session?"),a*60):(S(n=>n+1),g(!0),u("ðŸŽ‰ Work session complete! Time for a break."),r*60)):t-1)},1e3):m.current&&clearInterval(m.current),()=>{m.current&&clearInterval(m.current)}),[f,o,a,r,j,u]);const R=()=>{i===0&&x(o?r*60:a*60),b(!0)},B=()=>b(!1),W=()=>{b(!1),g(!1),x(a*60)},E=()=>{S(0),u("Sessions reset to 0")},A=()=>{j(),u("ðŸ”” Sound test!")},P=t=>{const n=Math.floor(t/60),N=t%60;return`${String(n).padStart(2,"0")}:${String(N).padStart(2,"0")}`},y=o?r*60:a*60,V=(y-i)/y*100,$=!f&&i===a*60&&!o;return e.jsxs("div",{className:"space-y-6",children:[v&&e.jsx("div",{className:"fixed top-4 right-4 z-50 px-4 py-3 rounded-lg shadow-lg bg-blue-500 text-white animate-fade-in",children:v}),$&&e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Work (minutes)"}),e.jsx("input",{type:"number",min:"1",max:"60",value:a,onChange:t=>{const n=Math.max(1,Math.min(60,Number(t.target.value)));C(n),x(n*60)},className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Break (minutes)"}),e.jsx("input",{type:"number",min:"1",max:"60",value:r,onChange:t=>{const n=Math.max(1,Math.min(60,Number(t.target.value)));M(n)},className:"input-field"})]})]}),e.jsxs("div",{className:`card text-center relative overflow-hidden ${o?"bg-green-50 dark:bg-green-900/20":"bg-red-50 dark:bg-red-900/20"}`,children:[e.jsx("div",{className:`absolute bottom-0 left-0 h-1 transition-all duration-1000 ${o?"bg-green-500":"bg-red-500"}`,style:{width:`${V}%`}}),e.jsx("div",{className:"text-sm font-medium text-slate-600 dark:text-slate-400 mb-2",children:o?"â˜• Break Time":"ðŸ’ª Work Time"}),e.jsx("div",{className:"text-6xl font-bold font-mono mb-4",children:P(i)}),e.jsxs("div",{className:"flex gap-3 justify-center flex-wrap",children:[f?e.jsxs("button",{onClick:B,className:"btn-secondary flex items-center space-x-2",children:[e.jsx(q,{className:"w-5 h-5"}),e.jsx("span",{children:"Pause"})]}):e.jsxs("button",{onClick:R,className:"btn-primary flex items-center space-x-2",children:[e.jsx(O,{className:"w-5 h-5"}),e.jsx("span",{children:"Start"})]}),e.jsxs("button",{onClick:W,className:"btn-secondary flex items-center space-x-2",children:[e.jsx(L,{className:"w-5 h-5"}),e.jsx("span",{children:"Reset"})]}),e.jsx("button",{onClick:()=>I(!c),className:"btn-secondary flex items-center space-x-2",title:c?"Sound On":"Sound Off",children:c?e.jsx(z,{className:"w-5 h-5"}):e.jsx(G,{className:"w-5 h-5"})}),e.jsx("button",{onClick:A,className:"btn-secondary flex items-center space-x-2",title:"Test Sound",children:e.jsx(X,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"card text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:l}),e.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Completed Sessions"})]}),l>0&&e.jsx("button",{onClick:E,className:"btn-secondary text-xs",children:"Reset"})]}),l>0&&e.jsxs("div",{className:"mt-3 text-sm text-slate-500 dark:text-slate-400",children:["Total focus time: ",l*a," minutes"]})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/30 border border-blue-200 dark:border-blue-800 rounded-lg p-4 text-sm text-blue-800 dark:text-blue-100",children:[e.jsx("strong",{children:"ðŸ’¡ Pomodoro Technique:"})," Work for ",a," minutes, then take a ",r,"-minute break. After 4 sessions, take a longer 15-30 minute break."]})]})}export{Y as default};
