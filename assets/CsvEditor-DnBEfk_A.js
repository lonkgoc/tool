import{c as R,r as m,j as e,b as q}from"./index-DrWj1tgA.js";import{D as C}from"./download-DZ1EfTSG.js";import{T as y}from"./trash-2-DTZrw6Iv.js";import{P as S}from"./plus-DPTEUXD6.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=R("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=R("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]);function Y(){const[o,p]=m.useState(["Column 1","Column 2","Column 3"]),[n,d]=m.useState([{id:"1",cells:["","",""]},{id:"2",cells:["","",""]},{id:"3",cells:["","",""]}]),[f,g]=m.useState("data"),[u,L]=m.useState(""),[U,D]=m.useState(null),[E,O]=m.useState("asc"),T=m.useRef(null),A=t=>{var l;const s=(l=t.target.files)==null?void 0:l[0];if(!s)return;const a=new FileReader;a.onload=r=>{var k;const i=((k=r.target)==null?void 0:k.result).split(`
`).filter(x=>x.trim());if(i.length===0)return;const h=i[0],j=w(h);p(j);const b=[];for(let x=1;x<i.length;x++){const N=w(i[x]);for(;N.length<j.length;)N.push("");b.push({id:Date.now().toString()+x,cells:N})}d(b.length>0?b:[{id:"1",cells:j.map(()=>"")}]),g(s.name.replace(".csv",""))},a.readAsText(s)},w=t=>{const s=[];let a="",l=!1;for(let r=0;r<t.length;r++){const c=t[r];c==='"'?l&&t[r+1]==='"'?(a+='"',r++):l=!l:c===","&&!l?(s.push(a.trim()),a=""):a+=c}return s.push(a.trim()),s},F=(t,s,a)=>{d(n.map(l=>l.id===t?{...l,cells:l.cells.map((r,c)=>c===s?a:r)}:l))},M=(t,s)=>{p(o.map((a,l)=>l===t?s:a))},V=()=>{d([...n,{id:Date.now().toString(),cells:o.map(()=>"")}])},$=t=>{n.length>1&&d(n.filter(s=>s.id!==t))},B=()=>{p([...o,`Column ${o.length+1}`]),d(n.map(t=>({...t,cells:[...t.cells,""]})))},H=t=>{o.length>1&&(p(o.filter((s,a)=>a!==t)),d(n.map(s=>({...s,cells:s.cells.filter((a,l)=>l!==t)}))))},J=t=>{const s=U===t&&E==="asc"?"desc":"asc";D(t),O(s);const a=[...n].sort((l,r)=>{const c=l.cells[t]||"",i=r.cells[t]||"",h=c.localeCompare(i,void 0,{numeric:!0});return s==="asc"?h:-h});d(a)},P=()=>{const t=c=>c.includes(",")||c.includes('"')||c.includes(`
`)?`"${c.replace(/"/g,'""')}"`:c;let s=o.map(t).join(",")+`
`;n.forEach(c=>{s+=c.cells.map(t).join(",")+`
`});const a=new Blob([s],{type:"text/csv"}),l=URL.createObjectURL(a),r=document.createElement("a");r.href=l,r.download=`${f}.csv`,r.click(),URL.revokeObjectURL(l)},_=()=>{const t=n.map(r=>{const c={};return o.forEach((i,h)=>{c[i]=r.cells[h]||""}),c}),s=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),a=URL.createObjectURL(s),l=document.createElement("a");l.href=a,l.download=`${f}.json`,l.click(),URL.revokeObjectURL(a)},v=u?n.filter(t=>t.cells.some(s=>s.toLowerCase().includes(u.toLowerCase()))):n;return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100 flex items-center gap-2",children:[e.jsx(z,{className:"w-6 h-6 text-green-500"}),"CSV Editor"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:P,className:"btn-primary text-sm flex items-center gap-1",children:[e.jsx(C,{className:"w-4 h-4"})," CSV"]}),e.jsxs("button",{onClick:_,className:"btn-secondary text-sm flex items-center gap-1",children:[e.jsx(C,{className:"w-4 h-4"})," JSON"]})]})]}),e.jsx("div",{className:"mb-4",children:e.jsx("input",{ref:T,type:"file",accept:".csv,.txt",onChange:A,className:"input-field"})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"File Name"}),e.jsx("input",{type:"text",value:f,onChange:t=>g(t.target.value),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(q,{className:"w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"}),e.jsx("input",{type:"text",value:u,onChange:t=>L(t.target.value),placeholder:"Filter rows...",className:"input-field pl-10"})]})]})]}),e.jsx("div",{className:"overflow-x-auto mb-4",children:e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"border border-slate-200 dark:border-slate-700 p-1 w-10",children:"#"}),o.map((t,s)=>e.jsx("th",{className:"border border-slate-200 dark:border-slate-700 p-1 min-w-[120px]",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("input",{type:"text",value:t,onChange:a=>M(s,a.target.value),className:"w-full bg-transparent font-medium text-sm p-1"}),e.jsx("button",{onClick:()=>J(s),className:"text-slate-400 hover:text-slate-600",children:e.jsx(Q,{className:"w-3 h-3"})}),e.jsx("button",{onClick:()=>H(s),className:"text-red-400 hover:text-red-600",children:e.jsx(y,{className:"w-3 h-3"})})]})},s)),e.jsx("th",{className:"border border-slate-200 dark:border-slate-700 p-1 w-10",children:e.jsx("button",{onClick:B,className:"text-green-500 hover:text-green-600",children:e.jsx(S,{className:"w-4 h-4"})})})]})}),e.jsx("tbody",{children:v.map((t,s)=>e.jsxs("tr",{children:[e.jsx("td",{className:"border border-slate-200 dark:border-slate-700 p-1 text-center text-xs text-slate-400",children:s+1}),t.cells.map((a,l)=>e.jsx("td",{className:"border border-slate-200 dark:border-slate-700 p-1",children:e.jsx("input",{type:"text",value:a,onChange:r=>F(t.id,l,r.target.value),className:"w-full bg-transparent text-sm p-1"})},l)),e.jsx("td",{className:"border border-slate-200 dark:border-slate-700 p-1 text-center",children:e.jsx("button",{onClick:()=>$(t.id),className:"text-red-400 hover:text-red-600",children:e.jsx(y,{className:"w-3 h-3"})})})]},t.id))})]})}),e.jsxs("button",{onClick:V,className:"btn-secondary w-full flex items-center justify-center gap-1",children:[e.jsx(S,{className:"w-4 h-4"})," Add Row"]}),e.jsxs("div",{className:"mt-4 text-sm text-slate-500",children:[o.length," columns Ã— ",n.length," rows",u&&` (showing ${v.length})`]})]})})}export{Y as default};
