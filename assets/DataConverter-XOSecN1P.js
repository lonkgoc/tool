const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/toml-BmzwlBLx.js","assets/index-DrWj1tgA.js","assets/index-nzkunwU1.css","assets/__vite-browser-external-D7Ct-6yo.js"])))=>i.map(i=>d[i]);
import{c as H,r as f,j as a,_ as g}from"./index-DrWj1tgA.js";import{A as q}from"./arrow-right-left-Zm9eDiY6.js";import{A as G}from"./alert-circle-CB5MyUBg.js";import{C as K}from"./check-C28q0Ni9.js";import{C as Q}from"./copy-BeFJNMJT.js";import{D as Z}from"./download-DZ1EfTSG.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=H("FileJson",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]]);function le({initialMode:$="json-csv",hideTabs:v=!1}){const[m,O]=f.useState(""),[j,y]=f.useState(""),[u,T]=f.useState($),[k,p]=f.useState(""),[w,J]=f.useState(!1),[S,x]=f.useState(!1),L=[{id:"json-csv",label:"JSON → CSV",from:"JSON",to:"CSV"},{id:"csv-json",label:"CSV → JSON",from:"CSV",to:"JSON"},{id:"json-xml",label:"JSON → XML",from:"JSON",to:"XML"},{id:"xml-json",label:"XML → JSON",from:"XML",to:"JSON"},{id:"json-yaml",label:"JSON → YAML",from:"JSON",to:"YAML"},{id:"yaml-json",label:"YAML → JSON",from:"YAML",to:"JSON"},{id:"json-toml",label:"JSON → TOML",from:"JSON",to:"TOML"},{id:"toml-json",label:"TOML → JSON",from:"TOML",to:"JSON"},{id:"json-excel",label:"JSON → Excel",from:"JSON",to:"Excel"},{id:"excel-json",label:"Excel → JSON",from:"Excel",to:"JSON"}],_=e=>{const l=JSON.parse(e),c=Array.isArray(l)?l:[l];if(c.length===0)return"";const t=Object.keys(c[0]),n=[t.join(",")];for(const o of c){const r=t.map(s=>{const i=o[s];return`"${String(i??"").replace(/"/g,'""')}"`});n.push(r.join(","))}return n.join(`
`)},E=e=>{const l=e.trim().split(`
`);if(l.length<2)return"[]";const c=l[0].split(",").map(n=>n.replace(/^"|"$/g,"").trim()),t=[];for(let n=1;n<l.length;n++){const o=l[n].match(/(".*?"|[^,]+)/g)||[],r={};c.forEach((s,i)=>{let d=o[i]||"";d=d.replace(/^"|"$/g,"").replace(/""/g,'"'),!isNaN(Number(d))&&d!==""?r[s]=Number(d):d.toLowerCase()==="true"?r[s]=!0:d.toLowerCase()==="false"?r[s]=!1:r[s]=d}),t.push(r)}return JSON.stringify(t,null,2)},M=e=>{const l=JSON.parse(e),c=(t,n="root")=>{if(Array.isArray(t))return t.map(o=>`<item>${typeof o=="object"?c(o,""):o}</item>`).join(`
`);if(typeof t=="object"&&t!==null){let o=n?`<${n}>`:"";for(const[r,s]of Object.entries(t))Array.isArray(s)?o+=`<${r}>${s.map(i=>`<item>${typeof i=="object"?c(i,""):i}</item>`).join("")}</${r}>`:typeof s=="object"&&s!==null?o+=`<${r}>${c(s,"")}</${r}>`:o+=`<${r}>${s}</${r}>`;return o+=n?`</${n}>`:"",o}return String(t)};return`<?xml version="1.0" encoding="UTF-8"?>
${c(l)}`},R=e=>{const c=new DOMParser().parseFromString(e,"text/xml"),t=o=>{const r={};for(const s of Array.from(o.attributes))r[`@${s.name}`]=s.value;for(const s of Array.from(o.children)){const i=s.tagName,d=s.children.length>0?t(s):s.textContent;r[i]!==void 0?(Array.isArray(r[i])||(r[i]=[r[i]]),r[i].push(d)):r[i]=d}return o.children.length===0&&Object.keys(r).length===0?o.textContent:r},n=c.documentElement;return JSON.stringify({[n.tagName]:t(n)},null,2)},D=(e,l=0)=>{const c=JSON.parse(e),t=(n,o)=>{const r="  ".repeat(o);return Array.isArray(n)?n.map(s=>typeof s=="object"&&s!==null?`${r}-
${t(s,o+1)}`:`${r}- ${s}`).join(`
`):typeof n=="object"&&n!==null?Object.entries(n).map(([s,i])=>typeof i=="object"&&i!==null?`${r}${s}:
${t(i,o+1)}`:`${r}${s}: ${i}`).join(`
`):String(n)};return t(c,l)},U=e=>{const l=e.split(`
`).filter(n=>n.trim()&&!n.trim().startsWith("#")),c={},t=[{obj:c,indent:-1}];for(const n of l){const o=n.search(/\S/),r=n.trim();for(;t.length>1&&t[t.length-1].indent>=o;)t.pop();const s=t[t.length-1].obj;if(r.startsWith("- ")){const i=r.substring(2);if(Array.isArray(s))s.push(b(i));else{const d=Object.keys(s).pop();d&&!Array.isArray(s[d])||d?s[d].push(b(i)):s.push(b(i))}}else if(r.includes(":")){const i=r.indexOf(":"),d=r.substring(0,i).trim(),N=r.substring(i+1).trim();N?s[d]=b(N):(s[d]={},t.push({obj:s[d],indent:o}))}}return JSON.stringify(c,null,2)},b=e=>e==="true"?!0:e==="false"?!1:e==="null"?null:!isNaN(Number(e))&&e!==""?Number(e):e.replace(/^['"]|['"]$/g,""),V=async e=>{const l=JSON.parse(e);return(await g(()=>import("./toml-BmzwlBLx.js").then(t=>t.t),__vite__mapDeps([0,1,2,3]))).stringify(l)},X=async e=>{const c=(await g(()=>import("./toml-BmzwlBLx.js").then(t=>t.t),__vite__mapDeps([0,1,2,3]))).parse(e);return JSON.stringify(c,null,2)},[A,C]=f.useState(null),P=async e=>{const l=JSON.parse(e),c=await g(()=>import("./xlsx-D_0l8YDs.js"),[]),t=Array.isArray(l)?l:[l],n=c.utils.json_to_sheet(t),o=c.utils.book_new();c.utils.book_append_sheet(o,n,"Sheet1");const r=c.write(o,{bookType:"xlsx",type:"array"}),s=new Blob([r],{type:"application/octet-stream"});return C(s),"[Excel file ready to download]"},F=async e=>{const l=await g(()=>import("./xlsx-D_0l8YDs.js"),[]);return new Promise((c,t)=>{const n=new FileReader;n.onload=o=>{var r;try{const s=new Uint8Array((r=o.target)==null?void 0:r.result),i=l.read(s,{type:"array"}),d=i.SheetNames[0],N=i.Sheets[d],z=l.utils.sheet_to_json(N);c(JSON.stringify(z,null,2))}catch(s){t(s)}},n.readAsArrayBuffer(e)})},I=async()=>{if(p(""),y(""),C(null),!m.trim()&&u!=="excel-json"){p("Please enter input data");return}x(!0);try{let e="";switch(u){case"json-csv":e=_(m);break;case"csv-json":e=E(m);break;case"json-xml":e=M(m);break;case"xml-json":e=R(m);break;case"json-yaml":e=D(m);break;case"yaml-json":e=U(m);break;case"json-toml":e=await V(m);break;case"toml-json":e=await X(m);break;case"json-excel":e=await P(m);break;case"excel-json":p("Please upload an Excel file for conversion");return}y(e)}catch(e){p(`Conversion error: ${e.message}`)}finally{x(!1)}},Y=async()=>{await navigator.clipboard.writeText(j),J(!0),setTimeout(()=>J(!1),2e3)},B=()=>{if(A){const n=URL.createObjectURL(A),o=document.createElement("a");o.href=n,o.download="converted.xlsx",o.click(),URL.revokeObjectURL(n);return}const e=u.split("-")[1],l=new Blob([j],{type:"text/plain"}),c=URL.createObjectURL(l),t=document.createElement("a");t.href=c,t.download=`converted.${e}`,t.click(),URL.revokeObjectURL(c)},W=async e=>{var c;const l=(c=e.target.files)==null?void 0:c[0];if(l)if(x(!0),u==="excel-json"||l.name.endsWith(".xlsx")||l.name.endsWith(".xls"))try{const t=await F(l);O(t),y(t)}catch(t){p("Failed to parse Excel file: "+t.message)}finally{x(!1)}else{const t=new FileReader;t.onload=n=>{var o;O((o=n.target)==null?void 0:o.result),x(!1)},t.readAsText(l)}},h=L.find(e=>e.id===u);return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"card",children:[a.jsxs("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100 mb-6 flex items-center gap-2",children:[a.jsx(ee,{className:"w-6 h-6 text-blue-500"}),v?h.label:"Data Format Converter"]}),!v&&a.jsxs("div",{className:"mb-6",children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Conversion Type"}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:L.map(e=>a.jsx("button",{onClick:()=>{T(e.id),y(""),p("")},className:`p-3 rounded-lg border-2 font-medium transition-all ${u===e.id?"border-blue-500 bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300":"border-slate-200 dark:border-slate-700 hover:border-blue-300"}`,children:e.label},e.id))})]}),a.jsx("div",{className:"mb-4",children:a.jsx("input",{type:"file",accept:u.includes("excel")?".xlsx,.xls,.csv":".json,.csv,.xml,.yaml,.yml,.txt,.toml",onChange:W,className:"input-field"})}),a.jsxs("div",{className:"mb-4",children:[a.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Input (",h.from,")"]}),a.jsx("textarea",{value:m,onChange:e=>O(e.target.value),className:"input-field font-mono text-sm h-48",placeholder:`Paste your ${h.from} here...`})]}),a.jsxs("button",{onClick:I,disabled:S,className:"btn-primary w-full mb-4 flex items-center justify-center gap-2 disabled:opacity-50",children:[a.jsx(q,{className:`w-5 h-5 ${S?"animate-spin":""}`}),S?"Converting...":`Convert to ${h.to}`]}),k&&a.jsxs("div",{className:"mb-4 flex items-center gap-2 text-red-600 bg-red-50 dark:bg-red-900/20 p-4 rounded-xl",children:[a.jsx(G,{className:"w-5 h-5 flex-shrink-0"}),k]}),j&&a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:["Output (",h.to,")"]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:Y,className:"btn-secondary text-sm flex items-center gap-1",children:[w?a.jsx(K,{className:"w-4 h-4"}):a.jsx(Q,{className:"w-4 h-4"}),w?"Copied!":"Copy"]}),a.jsxs("button",{onClick:B,className:"btn-secondary text-sm flex items-center gap-1",children:[a.jsx(Z,{className:"w-4 h-4"})," Download"]})]})]}),a.jsx("textarea",{value:j,readOnly:!0,className:"input-field font-mono text-sm h-48"})]})]}),a.jsxs("div",{className:"text-sm text-slate-500 dark:text-slate-400 bg-slate-50 dark:bg-slate-800/50 rounded-xl p-4",children:[a.jsx("p",{className:"font-medium mb-2",children:"Supported Conversions:"}),a.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[a.jsx("li",{children:"JSON ↔ CSV (arrays of objects)"}),a.jsx("li",{children:"JSON ↔ XML (nested structures)"}),a.jsx("li",{children:"JSON ↔ YAML (configuration format)"}),a.jsx("li",{children:"JSON ↔ TOML (configuration format)"}),a.jsx("li",{children:"JSON ↔ Excel (via xlsx)"})]})]})]})}export{le as D};
