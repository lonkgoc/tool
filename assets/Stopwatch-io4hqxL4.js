import{r as d,j as e}from"./index-DrWj1tgA.js";import{P as D}from"./play-QS35GPs2.js";import{P as M}from"./pause-DByj3rES.js";import{F as L}from"./flag-o9nSWjC2.js";import{S as P}from"./square-CeNhzo1Y.js";import{D as U}from"./download-DZ1EfTSG.js";function B(){var S,k;const[h,u]=d.useState(0),[x,p]=d.useState(!1),[s,g]=d.useState([]),[b,j]=d.useState(null),m=d.useRef(null);d.useEffect(()=>(x?m.current=window.setInterval(()=>{u(t=>t+10)},10):m.current&&clearInterval(m.current),()=>{m.current&&clearInterval(m.current)}),[x]);const l=(t,a=!0)=>{const r=Math.floor(t/36e5),n=Math.floor(t%36e5/1e3),i=Math.floor(n/60),f=n%60,c=Math.floor(t%1e3/10);let o="";return r>0?o=`${r}:${String(i).padStart(2,"0")}:${String(f).padStart(2,"0")}`:o=`${String(i).padStart(2,"0")}:${String(f).padStart(2,"0")}`,a&&(o+=`.${String(c).padStart(2,"0")}`),o},N=t=>{j(t),setTimeout(()=>j(null),3e3)},y=()=>p(!0),$=()=>p(!1),T=()=>{u(0),g([]),p(!1)},C=()=>{const t=s.length>0?s[s.length-1].time:0,a=h-t,r={number:s.length+1,time:h,diff:a};g([...s,r])},R=()=>{if(s.length<2)return-1;let t=0,a=s[0].diff;return s.forEach((r,n)=>{r.diff<a&&(a=r.diff,t=n)}),t},E=()=>{if(s.length<2)return-1;let t=0,a=s[0].diff;return s.forEach((r,n)=>{r.diff>a&&(a=r.diff,t=n)}),t},F=()=>{if(s.length===0){N("No laps to export");return}const t=`Lap Number,Lap Time,Split Time,Total Time
`,a=s.map(o=>`${o.number},${l(o.diff,!1)},${l(o.diff,!0)},${l(o.time,!0)}`).join(`
`),r=`

Summary
Total Time,${l(h,!0)}
Total Laps,${s.length}
`,n=t+a+r,i=new Blob([n],{type:"text/csv"}),f=URL.createObjectURL(i),c=document.createElement("a");c.href=f,c.download=`stopwatch-laps-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(f),N("Laps exported to CSV!")},w=R(),v=E();return e.jsxs("div",{className:"space-y-6",children:[b&&e.jsx("div",{className:"fixed top-4 right-4 z-50 px-4 py-3 rounded-lg shadow-lg bg-blue-500 text-white animate-fade-in",children:b}),e.jsxs("div",{className:"card text-center bg-gradient-to-br from-slate-50 to-blue-50 dark:from-slate-800 dark:to-blue-900/20",children:[e.jsx("div",{className:"text-6xl md:text-7xl font-bold text-blue-600 dark:text-blue-400 mb-6 font-mono tracking-wide",children:l(h)}),e.jsxs("div",{className:"flex gap-3 justify-center flex-wrap",children:[x?e.jsxs("button",{onClick:$,className:"btn-secondary flex items-center space-x-2",children:[e.jsx(M,{className:"w-5 h-5"}),e.jsx("span",{children:"Pause"})]}):e.jsxs("button",{onClick:y,className:"btn-primary flex items-center space-x-2",children:[e.jsx(D,{className:"w-5 h-5"}),e.jsx("span",{children:"Start"})]}),e.jsxs("button",{onClick:C,disabled:!x,className:`btn-secondary flex items-center space-x-2 ${x?"":"opacity-50 cursor-not-allowed"}`,children:[e.jsx(L,{className:"w-5 h-5"}),e.jsx("span",{children:"Lap"})]}),e.jsxs("button",{onClick:T,className:"btn-secondary flex items-center space-x-2",children:[e.jsx(P,{className:"w-5 h-5"}),e.jsx("span",{children:"Reset"})]})]})]}),s.length>0&&e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h3",{className:"font-semibold text-slate-900 dark:text-slate-100 flex items-center gap-2",children:[e.jsx(L,{className:"w-5 h-5"}),"Lap Times (",s.length,")"]}),e.jsxs("button",{onClick:F,className:"btn-secondary text-sm flex items-center gap-1",children:[e.jsx(U,{className:"w-4 h-4"}),"Export CSV"]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-sm font-medium text-slate-500 dark:text-slate-400 mb-2 px-3",children:[e.jsx("span",{children:"Lap"}),e.jsx("span",{className:"text-center",children:"Split"}),e.jsx("span",{className:"text-right",children:"Total"})]}),e.jsx("div",{className:"space-y-1 max-h-64 overflow-y-auto",children:[...s].reverse().map((t,a)=>{const r=s.length-1-a,n=r===w,i=r===v;return e.jsxs("div",{className:`grid grid-cols-3 gap-2 p-3 rounded-lg transition-colors ${n?"bg-green-100 dark:bg-green-900/30 border border-green-300 dark:border-green-700":i?"bg-red-100 dark:bg-red-900/30 border border-red-300 dark:border-red-700":"bg-white/50 dark:bg-slate-700/50"}`,children:[e.jsxs("span",{className:"text-slate-700 dark:text-slate-300 flex items-center gap-1",children:["Lap ",t.number,n&&e.jsx("span",{title:"Fastest",children:"ðŸ†"}),i&&e.jsx("span",{title:"Slowest",children:"ðŸ¢"})]}),e.jsxs("span",{className:`font-mono font-semibold text-center ${n?"text-green-600 dark:text-green-400":i?"text-red-600 dark:text-red-400":"text-slate-900 dark:text-slate-100"}`,children:["+",l(t.diff)]}),e.jsx("span",{className:"font-mono text-slate-600 dark:text-slate-400 text-right",children:l(t.time)})]},t.number)})}),s.length>=2&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-200 dark:border-slate-700 grid grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-bold text-green-600 dark:text-green-400",children:l(((S=s[w])==null?void 0:S.diff)||0)}),e.jsx("div",{className:"text-xs text-slate-500",children:"Fastest Lap"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:l(Math.round(s.reduce((t,a)=>t+a.diff,0)/s.length))}),e.jsx("div",{className:"text-xs text-slate-500",children:"Average"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-bold text-red-600 dark:text-red-400",children:l(((k=s[v])==null?void 0:k.diff)||0)}),e.jsx("div",{className:"text-xs text-slate-500",children:"Slowest Lap"})]})]})]})]})}export{B as default};
