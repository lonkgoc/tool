import{r as l,j as e,L as ne,X as ce}from"./index-DrWj1tgA.js";import{A as re}from"./alert-circle-CB5MyUBg.js";import{U as oe}from"./upload-C3dpc3Xt.js";import{D as me}from"./download-DZ1EfTSG.js";function xe({initialOp:E,hideTabs:X=!1}={}){const[c,Y]=l.useState(E||"compress"),[d,L]=l.useState(null),[G,U]=l.useState(null),[x,m]=l.useState(null),[I,O]=l.useState(!1),[F,h]=l.useState(""),v=l.useRef(null),[u,N]=l.useState(800),[g,p]=l.useState(600),[f,H]=l.useState(!0),[w,$]=l.useState({width:0,height:0}),[T,M]=l.useState(0),[z,Q]=l.useState(0),[b,A]=l.useState(100),[j,W]=l.useState(100),[y,V]=l.useState("png"),[k,q]=l.useState(.8),[B,J]=l.useState("Your Text"),[C,K]=l.useState(50),[S,Z]=l.useState(50),[R,_]=l.useState(32),[D,ee]=l.useState("#FFFFFF"),te=t=>{var n;const s=(n=t.target.files)==null?void 0:n[0];if(s&&s.type.startsWith("image/")){L(s),h(""),m(null);const i=URL.createObjectURL(s);U(i);const a=new Image;a.onload=()=>{$({width:a.width,height:a.height}),N(a.width),p(a.height),A(a.width),W(a.height)},a.src=i}else s&&h("Please select a valid image file")},se=async()=>{if(!d){h("Please select an image first");return}O(!0),h(""),m(null);try{const t=new Image;t.src=G,await new Promise(i=>t.onload=i);const s=document.createElement("canvas"),n=s.getContext("2d");switch(c){case"compress":{s.width=t.width,s.height=t.height,n.drawImage(t,0,0);const i=await new Promise(a=>s.toBlob(o=>a(o),"image/jpeg",k));m(URL.createObjectURL(i));break}case"resize":{s.width=u,s.height=g,n.drawImage(t,0,0,u,g);const i=await new Promise(a=>s.toBlob(o=>a(o),d.type,.95));m(URL.createObjectURL(i));break}case"crop":{s.width=b,s.height=j,n.drawImage(t,T,z,b,j,0,0,b,j);const i=await new Promise(a=>s.toBlob(o=>a(o),d.type,.95));m(URL.createObjectURL(i));break}case"convert":{s.width=t.width,s.height=t.height,n.drawImage(t,0,0);const i=`image/${y}`,a=await new Promise(o=>s.toBlob(r=>o(r),i,.95));m(URL.createObjectURL(a));break}case"text":{s.width=t.width,s.height=t.height,n.drawImage(t,0,0),n.font=`${R}px Arial`,n.fillStyle=D,n.textAlign="left";const i=C/100*s.width,a=S/100*s.height;n.fillText(B,i,a);const o=await new Promise(r=>s.toBlob(P=>r(P),d.type,.95));m(URL.createObjectURL(o));break}case"svg2png":{s.width=u||512,s.height=g||512,n.drawImage(t,0,0,s.width,s.height);const i=await new Promise(a=>s.toBlob(o=>a(o),"image/png",1));m(URL.createObjectURL(i));break}case"png2ico":{const i=[16,32,48],a=[];for(const r of i)s.width=r,s.height=r,n.clearRect(0,0,r,r),n.drawImage(t,0,0,r,r),a.push(n.getImageData(0,0,r,r));s.width=32,s.height=32,n.drawImage(t,0,0,32,32);const o=await new Promise(r=>s.toBlob(P=>r(P),"image/png",1));m(URL.createObjectURL(o));break}}}catch(t){h(t.message||"Error processing image")}finally{O(!1)}},ae=()=>{if(!x)return;const t=document.createElement("a");t.href=x;const s=c==="convert"?y:c==="compress"?"jpg":"png";t.download=`${(d==null?void 0:d.name.split(".")[0])||"image"}-${c}.${s}`,t.click()},le=()=>{L(null),U(null),m(null),h(""),v.current&&(v.current.value="")},ie=t=>{if(N(t),f&&w.width>0){const s=w.height/w.width;p(Math.round(t*s))}};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:"Image Tools"}),!X&&e.jsx("div",{className:"flex gap-2 flex-wrap",children:["compress","resize","crop","convert","text","svg2png","png2ico"].map(t=>e.jsx("button",{onClick:()=>{Y(t),m(null)},className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${c===t?"bg-blue-500 text-white":"bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:t==="svg2png"?"SVG → PNG":t==="png2ico"?"PNG → ICO":t.charAt(0).toUpperCase()+t.slice(1)},t))}),F&&e.jsxs("div",{className:"flex items-center gap-2 text-red-600 bg-red-50 dark:bg-red-900/20 p-4 rounded-xl",children:[e.jsx(re,{className:"w-5 h-5"}),F]}),e.jsxs("label",{className:"cursor-pointer block",children:[e.jsx("input",{ref:v,type:"file",accept:c==="svg2png"?".svg,image/svg+xml":"image/*",onChange:te,className:"hidden"}),e.jsx("div",{className:"flex items-center justify-center p-8 border-2 border-dashed border-slate-300 dark:border-slate-600 rounded-xl hover:border-blue-500 transition-colors",children:e.jsxs("div",{className:"text-center",children:[e.jsx(oe,{className:"w-12 h-12 mx-auto mb-4 text-slate-400"}),e.jsxs("p",{className:"text-slate-600 dark:text-slate-400",children:["Click to upload ",c==="svg2png"?"SVG":"image"," or drag and drop"]}),d&&e.jsx("p",{className:"text-sm text-blue-600 mt-2",children:d.name})]})})]}),d&&e.jsxs("div",{className:"card space-y-4",children:[c==="compress"&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Quality: ",Math.round(k*100),"%"]}),e.jsx("input",{type:"range",min:"0.1",max:"1",step:"0.1",value:k,onChange:t=>q(Number(t.target.value)),className:"w-full"})]}),c==="resize"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Width"}),e.jsx("input",{type:"number",value:u,onChange:t=>ie(Number(t.target.value)),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Height"}),e.jsx("input",{type:"number",value:g,onChange:t=>p(Number(t.target.value)),className:"input-field",disabled:f})]})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:f,onChange:t=>H(t.target.checked)}),e.jsx("span",{className:"text-sm",children:"Maintain aspect ratio"})]})]}),c==="crop"&&e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"X Position"}),e.jsx("input",{type:"number",value:T,onChange:t=>M(Number(t.target.value)),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Y Position"}),e.jsx("input",{type:"number",value:z,onChange:t=>Q(Number(t.target.value)),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Width"}),e.jsx("input",{type:"number",value:b,onChange:t=>A(Number(t.target.value)),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Height"}),e.jsx("input",{type:"number",value:j,onChange:t=>W(Number(t.target.value)),className:"input-field"})]})]}),c==="convert"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Output Format"}),e.jsxs("select",{value:y,onChange:t=>V(t.target.value),className:"input-field",children:[e.jsx("option",{value:"jpeg",children:"JPEG"}),e.jsx("option",{value:"png",children:"PNG"}),e.jsx("option",{value:"webp",children:"WebP"})]})]}),c==="text"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Text"}),e.jsx("input",{type:"text",value:B,onChange:t=>J(t.target.value),className:"input-field"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2",children:["X Position: ",C,"%"]}),e.jsx("input",{type:"range",min:"0",max:"100",value:C,onChange:t=>K(Number(t.target.value)),className:"w-full"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Y Position: ",S,"%"]}),e.jsx("input",{type:"range",min:"0",max:"100",value:S,onChange:t=>Z(Number(t.target.value)),className:"w-full"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Font Size: ",R,"px"]}),e.jsx("input",{type:"range",min:"12",max:"120",value:R,onChange:t=>_(Number(t.target.value)),className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Color"}),e.jsx("input",{type:"color",value:D,onChange:t=>ee(t.target.value),className:"w-full h-10 rounded"})]})]})]}),(c==="svg2png"||c==="png2ico")&&e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Width"}),e.jsx("input",{type:"number",value:u,onChange:t=>N(Number(t.target.value)),className:"input-field"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Height"}),e.jsx("input",{type:"number",value:g,onChange:t=>p(Number(t.target.value)),className:"input-field"})]})]}),e.jsx("button",{onClick:se,disabled:I,className:"btn-primary w-full disabled:opacity-50",children:I?e.jsxs(e.Fragment,{children:[e.jsx(ne,{className:"w-5 h-5 animate-spin mr-2 inline"}),"Processing..."]}):"Process Image"})]}),x&&e.jsxs("div",{className:"card space-y-4",children:[e.jsx("h3",{className:"font-semibold",children:"Result"}),e.jsx("div",{className:"flex justify-center bg-slate-100 dark:bg-slate-800 rounded-xl p-4",children:e.jsx("img",{src:x,alt:"Result",className:"max-w-full max-h-96 object-contain rounded"})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:ae,className:"btn-primary flex-1 flex items-center justify-center gap-2",children:[e.jsx(me,{className:"w-5 h-5"}),"Download"]}),e.jsx("button",{onClick:le,className:"btn-secondary",children:e.jsx(ce,{className:"w-5 h-5"})})]})]})]})}export{xe as I};
