import{r as i,j as t,a as U,C as L}from"./index-DqXMfBpZ.js";import{B as J}from"./brain-w9849W5Z.js";import{D as y}from"./download-DfWGAFzS.js";function P(){const[l,n]=i.useState(()=>{const e=localStorage.getItem("mindMap");return e?JSON.parse(e):{id:"0",text:"Central Idea",children:[],expanded:!0}}),[C,c]=i.useState(null),[p,m]=i.useState(""),[h,b]=i.useState(null);i.useEffect(()=>{localStorage.setItem("mindMap",JSON.stringify(l))},[l]);const o=e=>{b(e),setTimeout(()=>b(null),3e3)},x=(e,r,s)=>{if(e.id===r){const a={...e};return s(a),a}return{...e,children:e.children.map(a=>x(a,r,s))}},M=e=>{const r={id:Date.now().toString(),text:"New Idea",children:[],expanded:!0};n(x(l,e,s=>{s.children.push(r),s.expanded=!0})),c(r.id),m("New Idea"),o("Node added!")},g=(e,r)=>{n(x(l,e,s=>{s.text=r}))},R=e=>{n(x(l,e,r=>{r.expanded=!r.expanded}))},S=e=>{if(e==="0")return;const r=s=>({...s,children:s.children.filter(a=>a.id!==e).map(r)});n(r(l)),o("Node deleted")},N=e=>1+e.children.reduce((r,s)=>r+N(s),0),f=(e,r=1)=>e.children.length===0?r:Math.max(...e.children.map(s=>f(s,r+1))),E=()=>{const e=(v,u=0)=>{let w=(u===0?"# ":"  ".repeat(u)+"- ")+v.text+`
`;return v.children.forEach(T=>{w+=e(T,u+1)}),w},r=`=== Mind Map Export ===

`+e(l),s=new Blob([r],{type:"text/plain"}),a=URL.createObjectURL(s),d=document.createElement("a");d.href=a,d.download="mindmap.txt",d.click(),URL.revokeObjectURL(a),o("Mind map exported!")},I=()=>{const e=new Blob([JSON.stringify(l,null,2)],{type:"application/json"}),r=URL.createObjectURL(e),s=document.createElement("a");s.href=r,s.download="mindmap.json",s.click(),URL.revokeObjectURL(r),o("Exported as JSON!")},O=()=>{confirm("Reset entire mind map?")&&(n({id:"0",text:"Central Idea",children:[],expanded:!0}),o("Mind map reset"))},j=["bg-gradient-to-r from-blue-100 to-blue-200 dark:from-blue-900 dark:to-blue-800 border-blue-400","bg-gradient-to-r from-purple-100 to-purple-200 dark:from-purple-900 dark:to-purple-800 border-purple-400","bg-gradient-to-r from-green-100 to-green-200 dark:from-green-900 dark:to-green-800 border-green-400","bg-gradient-to-r from-yellow-100 to-yellow-200 dark:from-yellow-900 dark:to-yellow-800 border-yellow-400","bg-gradient-to-r from-pink-100 to-pink-200 dark:from-pink-900 dark:to-pink-800 border-pink-400"],k=(e,r=0)=>{const s=j[r%j.length],a=r===0;return t.jsxs("div",{className:`${a?"":"ml-8 mt-2"}`,children:[t.jsxs("div",{className:`border-2 ${s} rounded-lg p-3 inline-block cursor-pointer hover:shadow-lg transition-all relative`,children:[e.children.length>0&&t.jsx("button",{onClick:()=>R(e.id),className:"absolute -left-6 top-1/2 transform -translate-y-1/2 bg-white dark:bg-slate-800 rounded-full p-1 shadow",children:e.expanded?t.jsx(U,{className:"w-4 h-4"}):t.jsx(L,{className:"w-4 h-4"})}),C===e.id?t.jsx("input",{type:"text",value:p,onChange:d=>m(d.target.value),onBlur:()=>{g(e.id,p||"New Idea"),c(null)},onKeyPress:d=>{d.key==="Enter"&&(g(e.id,p||"New Idea"),c(null))},autoFocus:!0,className:"px-2 py-1 border rounded text-sm min-w-[100px]"}):t.jsx("div",{onClick:()=>{c(e.id),m(e.text)},className:`font-semibold text-slate-900 dark:text-slate-100 ${a?"text-lg":"text-sm"}`,children:e.text}),t.jsxs("div",{className:"flex gap-1 mt-2 justify-center",children:[t.jsx("button",{onClick:()=>M(e.id),className:"px-2 py-1 bg-green-500 text-white rounded text-xs hover:bg-green-600",children:"+"}),!a&&t.jsx("button",{onClick:()=>S(e.id),className:"px-2 py-1 bg-red-500 text-white rounded text-xs hover:bg-red-600",children:"Ã—"})]})]}),e.expanded&&e.children.length>0&&t.jsx("div",{className:"border-l-2 border-slate-300 dark:border-slate-600 pl-4 ml-4 mt-2",children:e.children.map(d=>k(d,r+1))})]},e.id)};return t.jsxs("div",{className:"space-y-6",children:[h&&t.jsx("div",{className:"fixed top-4 right-4 z-50 px-4 py-3 rounded-lg shadow-lg bg-purple-500 text-white animate-fade-in",children:h}),t.jsxs("div",{className:"card",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100 flex items-center gap-2",children:[t.jsx(J,{className:"w-6 h-6 text-purple-500"}),"Mind Map Creator"]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("button",{onClick:E,className:"btn-secondary text-sm flex items-center gap-1",children:[t.jsx(y,{className:"w-4 h-4"})," TXT"]}),t.jsxs("button",{onClick:I,className:"btn-secondary text-sm flex items-center gap-1",children:[t.jsx(y,{className:"w-4 h-4"})," JSON"]})]})]}),t.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[t.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/30 p-3 rounded-lg text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-blue-600",children:N(l)}),t.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Total Ideas"})]}),t.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/30 p-3 rounded-lg text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-purple-600",children:l.children.length}),t.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Main Branches"})]}),t.jsxs("div",{className:"bg-green-50 dark:bg-green-900/30 p-3 rounded-lg text-center",children:[t.jsx("div",{className:"text-2xl font-bold text-green-600",children:f(l)}),t.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:"Max Depth"})]})]}),t.jsx("div",{className:"bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl p-6 overflow-auto min-h-[300px]",children:k(l)}),t.jsx("div",{className:"flex justify-center mt-4",children:t.jsx("button",{onClick:O,className:"text-sm text-red-500 hover:text-red-600",children:"Reset Mind Map"})})]}),t.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/30 border border-purple-200 dark:border-purple-800 rounded-lg p-4 text-sm text-purple-800 dark:text-purple-100",children:[t.jsx("strong",{children:"ðŸ’¡ Tips:"})," Click on any node text to edit it. Use + to add branches, Ã— to delete. Export your mind map as text or JSON for backup."]})]})}export{P as default};
